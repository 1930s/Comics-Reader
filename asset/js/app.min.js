function toRetina(t){return t.replace(/\.\w+$/,function(t){return"@2x"+t})}function viewerOnResize(){window.photoViewer&&window.photoViewer.resize()}function viewerLoad(t,e){window.photoViewer=new PhotoViewer(t,e.images,{startAt:parseInt(e.index,10)})}function loadedPage(){var t=$("#content > .content");if(t.find("img.lazy").unveil(100),window.photoViewer&&(window.photoViewer.kill(),window.photoViewer=null),t.hasClass("gallery-page")){var e=[],n=0,i=t.find("ol.gallery li");i.on("tap",function(){viewerLoad(t[0],{images:e,index:$(this).data("index")})}),i.each(function(){var t=$(this);t.data("index",n),e[n]=window.isRetina?toRetina(t.data("img")):t.data("img"),n++})}}var Zepto=function(){function t(t){return null==t?String(t):G[$.call(t)]||"object"}function e(e){return"function"==t(e)}function n(t){return null!=t&&t==t.window}function i(t){return null!=t&&t.nodeType==t.DOCUMENT_NODE}function r(e){return"object"==t(e)}function o(t){return r(t)&&!n(t)&&Object.getPrototypeOf(t)==Object.prototype}function a(t){return"number"==typeof t.length}function s(t){return P.call(t,function(t){return null!=t})}function u(t){return t.length>0?x.fn.concat.apply([],t):t}function c(t){return t.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()}function l(t){return t in D?D[t]:D[t]=new RegExp("(^|\\s)"+t+"(\\s|$)")}function f(t,e){return"number"!=typeof e||N[c(t)]?e:e+"px"}function d(t){var e,n;return H[t]||(e=C.createElement(t),C.body.appendChild(e),n=getComputedStyle(e,"").getPropertyValue("display"),e.parentNode.removeChild(e),"none"==n&&(n="block"),H[t]=n),H[t]}function h(t){return"children"in t?M.call(t.children):x.map(t.childNodes,function(t){return 1==t.nodeType?t:void 0})}function p(t,e,n){for(E in e)n&&(o(e[E])||X(e[E]))?(o(e[E])&&!o(t[E])&&(t[E]={}),X(e[E])&&!X(t[E])&&(t[E]=[]),p(t[E],e[E],n)):e[E]!==A&&(t[E]=e[E])}function v(t,e){return null==e?x(t):x(t).filter(e)}function m(t,n,i,r){return e(n)?n.call(t,i,r):n}function g(t,e,n){null==n?t.removeAttribute(e):t.setAttribute(e,n)}function y(t,e){var n=t.className,i=n&&n.baseVal!==A;return e===A?i?n.baseVal:n:void(i?n.baseVal=e:t.className=e)}function w(t){var e;try{return t?"true"==t||("false"==t?!1:"null"==t?null:/^0/.test(t)||isNaN(e=Number(t))?/^[\[\{]/.test(t)?x.parseJSON(t):t:e):t}catch(n){return t}}function b(t,e){e(t);for(var n=0,i=t.childNodes.length;i>n;n++)b(t.childNodes[n],e)}var A,E,x,T,S,L,k=[],M=k.slice,P=k.filter,C=window.document,H={},D={},N={"column-count":1,columns:1,"font-weight":1,"line-height":1,opacity:1,"z-index":1,zoom:1},O=/^\s*<(\w+|!)[^>]*>/,j=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,_=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,I=/^(?:body|html)$/i,R=/([A-Z])/g,z=["val","css","html","text","data","width","height","offset"],Z=["after","prepend","before","append"],q=C.createElement("table"),B=C.createElement("tr"),V={tr:C.createElement("tbody"),tbody:q,thead:q,tfoot:q,td:B,th:B,"*":C.createElement("div")},U=/complete|loaded|interactive/,F=/^[\w-]*$/,G={},$=G.toString,J={},Q=C.createElement("div"),Y={tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},X=Array.isArray||function(t){return t instanceof Array};return J.matches=function(t,e){if(!e||!t||1!==t.nodeType)return!1;var n=t.webkitMatchesSelector||t.mozMatchesSelector||t.oMatchesSelector||t.matchesSelector;if(n)return n.call(t,e);var i,r=t.parentNode,o=!r;return o&&(r=Q).appendChild(t),i=~J.qsa(r,e).indexOf(t),o&&Q.removeChild(t),i},S=function(t){return t.replace(/-+(.)?/g,function(t,e){return e?e.toUpperCase():""})},L=function(t){return P.call(t,function(e,n){return t.indexOf(e)==n})},J.fragment=function(t,e,n){var i,r,a;return j.test(t)&&(i=x(C.createElement(RegExp.$1))),i||(t.replace&&(t=t.replace(_,"<$1></$2>")),e===A&&(e=O.test(t)&&RegExp.$1),e in V||(e="*"),a=V[e],a.innerHTML=""+t,i=x.each(M.call(a.childNodes),function(){a.removeChild(this)})),o(n)&&(r=x(i),x.each(n,function(t,e){z.indexOf(t)>-1?r[t](e):r.attr(t,e)})),i},J.Z=function(t,e){return t=t||[],t.__proto__=x.fn,t.selector=e||"",t},J.isZ=function(t){return t instanceof J.Z},J.init=function(t,n){var i;if(!t)return J.Z();if("string"==typeof t)if(t=t.trim(),"<"==t[0]&&O.test(t))i=J.fragment(t,RegExp.$1,n),t=null;else{if(n!==A)return x(n).find(t);i=J.qsa(C,t)}else{if(e(t))return x(C).ready(t);if(J.isZ(t))return t;if(X(t))i=s(t);else if(r(t))i=[t],t=null;else if(O.test(t))i=J.fragment(t.trim(),RegExp.$1,n),t=null;else{if(n!==A)return x(n).find(t);i=J.qsa(C,t)}}return J.Z(i,t)},x=function(t,e){return J.init(t,e)},x.extend=function(t){var e,n=M.call(arguments,1);return"boolean"==typeof t&&(e=t,t=n.shift()),n.forEach(function(n){p(t,n,e)}),t},J.qsa=function(t,e){var n,r="#"==e[0],o=!r&&"."==e[0],a=r||o?e.slice(1):e,s=F.test(a);return i(t)&&s&&r?(n=t.getElementById(a))?[n]:[]:1!==t.nodeType&&9!==t.nodeType?[]:M.call(s&&!r?o?t.getElementsByClassName(a):t.getElementsByTagName(e):t.querySelectorAll(e))},x.contains=C.documentElement.contains?function(t,e){return t!==e&&t.contains(e)}:function(t,e){for(;e&&(e=e.parentNode);)if(e===t)return!0;return!1},x.type=t,x.isFunction=e,x.isWindow=n,x.isArray=X,x.isPlainObject=o,x.isEmptyObject=function(t){var e;for(e in t)return!1;return!0},x.inArray=function(t,e,n){return k.indexOf.call(e,t,n)},x.camelCase=S,x.trim=function(t){return null==t?"":String.prototype.trim.call(t)},x.uuid=0,x.support={},x.expr={},x.map=function(t,e){var n,i,r,o=[];if(a(t))for(i=0;i<t.length;i++)n=e(t[i],i),null!=n&&o.push(n);else for(r in t)n=e(t[r],r),null!=n&&o.push(n);return u(o)},x.each=function(t,e){var n,i;if(a(t)){for(n=0;n<t.length;n++)if(e.call(t[n],n,t[n])===!1)return t}else for(i in t)if(e.call(t[i],i,t[i])===!1)return t;return t},x.grep=function(t,e){return P.call(t,e)},window.JSON&&(x.parseJSON=JSON.parse),x.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(t,e){G["[object "+e+"]"]=e.toLowerCase()}),x.fn={forEach:k.forEach,reduce:k.reduce,push:k.push,sort:k.sort,indexOf:k.indexOf,concat:k.concat,map:function(t){return x(x.map(this,function(e,n){return t.call(e,n,e)}))},slice:function(){return x(M.apply(this,arguments))},ready:function(t){return U.test(C.readyState)&&C.body?t(x):C.addEventListener("DOMContentLoaded",function(){t(x)},!1),this},get:function(t){return t===A?M.call(this):this[t>=0?t:t+this.length]},toArray:function(){return this.get()},size:function(){return this.length},remove:function(){return this.each(function(){null!=this.parentNode&&this.parentNode.removeChild(this)})},each:function(t){return k.every.call(this,function(e,n){return t.call(e,n,e)!==!1}),this},filter:function(t){return e(t)?this.not(this.not(t)):x(P.call(this,function(e){return J.matches(e,t)}))},add:function(t,e){return x(L(this.concat(x(t,e))))},is:function(t){return this.length>0&&J.matches(this[0],t)},not:function(t){var n=[];if(e(t)&&t.call!==A)this.each(function(e){t.call(this,e)||n.push(this)});else{var i="string"==typeof t?this.filter(t):a(t)&&e(t.item)?M.call(t):x(t);this.forEach(function(t){i.indexOf(t)<0&&n.push(t)})}return x(n)},has:function(t){return this.filter(function(){return r(t)?x.contains(this,t):x(this).find(t).size()})},eq:function(t){return-1===t?this.slice(t):this.slice(t,+t+1)},first:function(){var t=this[0];return t&&!r(t)?t:x(t)},last:function(){var t=this[this.length-1];return t&&!r(t)?t:x(t)},find:function(t){var e,n=this;return e=t?"object"==typeof t?x(t).filter(function(){var t=this;return k.some.call(n,function(e){return x.contains(e,t)})}):1==this.length?x(J.qsa(this[0],t)):this.map(function(){return J.qsa(this,t)}):[]},closest:function(t,e){var n=this[0],r=!1;for("object"==typeof t&&(r=x(t));n&&!(r?r.indexOf(n)>=0:J.matches(n,t));)n=n!==e&&!i(n)&&n.parentNode;return x(n)},parents:function(t){for(var e=[],n=this;n.length>0;)n=x.map(n,function(t){return(t=t.parentNode)&&!i(t)&&e.indexOf(t)<0?(e.push(t),t):void 0});return v(e,t)},parent:function(t){return v(L(this.pluck("parentNode")),t)},children:function(t){return v(this.map(function(){return h(this)}),t)},contents:function(){return this.map(function(){return M.call(this.childNodes)})},siblings:function(t){return v(this.map(function(t,e){return P.call(h(e.parentNode),function(t){return t!==e})}),t)},empty:function(){return this.each(function(){this.innerHTML=""})},pluck:function(t){return x.map(this,function(e){return e[t]})},show:function(){return this.each(function(){"none"==this.style.display&&(this.style.display=""),"none"==getComputedStyle(this,"").getPropertyValue("display")&&(this.style.display=d(this.nodeName))})},replaceWith:function(t){return this.before(t).remove()},wrap:function(t){var n=e(t);if(this[0]&&!n)var i=x(t).get(0),r=i.parentNode||this.length>1;return this.each(function(e){x(this).wrapAll(n?t.call(this,e):r?i.cloneNode(!0):i)})},wrapAll:function(t){if(this[0]){x(this[0]).before(t=x(t));for(var e;(e=t.children()).length;)t=e.first();x(t).append(this)}return this},wrapInner:function(t){var n=e(t);return this.each(function(e){var i=x(this),r=i.contents(),o=n?t.call(this,e):t;r.length?r.wrapAll(o):i.append(o)})},unwrap:function(){return this.parent().each(function(){x(this).replaceWith(x(this).children())}),this},clone:function(){return this.map(function(){return this.cloneNode(!0)})},hide:function(){return this.css("display","none")},toggle:function(t){return this.each(function(){var e=x(this);(t===A?"none"==e.css("display"):t)?e.show():e.hide()})},prev:function(t){return x(this.pluck("previousElementSibling")).filter(t||"*")},next:function(t){return x(this.pluck("nextElementSibling")).filter(t||"*")},html:function(t){return 0 in arguments?this.each(function(e){var n=this.innerHTML;x(this).empty().append(m(this,t,e,n))}):0 in this?this[0].innerHTML:null},text:function(t){return 0 in arguments?this.each(function(e){var n=m(this,t,e,this.textContent);this.textContent=null==n?"":""+n}):0 in this?this[0].textContent:null},attr:function(t,e){var n;return"string"!=typeof t||1 in arguments?this.each(function(n){if(1===this.nodeType)if(r(t))for(E in t)g(this,E,t[E]);else g(this,t,m(this,e,n,this.getAttribute(t)))}):this.length&&1===this[0].nodeType?!(n=this[0].getAttribute(t))&&t in this[0]?this[0][t]:n:A},removeAttr:function(t){return this.each(function(){1===this.nodeType&&g(this,t)})},prop:function(t,e){return t=Y[t]||t,1 in arguments?this.each(function(n){this[t]=m(this,e,n,this[t])}):this[0]&&this[0][t]},data:function(t,e){var n="data-"+t.replace(R,"-$1").toLowerCase(),i=1 in arguments?this.attr(n,e):this.attr(n);return null!==i?w(i):A},val:function(t){return 0 in arguments?this.each(function(e){this.value=m(this,t,e,this.value)}):this[0]&&(this[0].multiple?x(this[0]).find("option").filter(function(){return this.selected}).pluck("value"):this[0].value)},offset:function(t){if(t)return this.each(function(e){var n=x(this),i=m(this,t,e,n.offset()),r=n.offsetParent().offset(),o={top:i.top-r.top,left:i.left-r.left};"static"==n.css("position")&&(o.position="relative"),n.css(o)});if(!this.length)return null;var e=this[0].getBoundingClientRect();return{left:e.left+window.pageXOffset,top:e.top+window.pageYOffset,width:Math.round(e.width),height:Math.round(e.height)}},css:function(e,n){if(arguments.length<2){var i=this[0],r=getComputedStyle(i,"");if(!i)return;if("string"==typeof e)return i.style[S(e)]||r.getPropertyValue(e);if(X(e)){var o={};return x.each(X(e)?e:[e],function(t,e){o[e]=i.style[S(e)]||r.getPropertyValue(e)}),o}}var a="";if("string"==t(e))n||0===n?a=c(e)+":"+f(e,n):this.each(function(){this.style.removeProperty(c(e))});else for(E in e)e[E]||0===e[E]?a+=c(E)+":"+f(E,e[E])+";":this.each(function(){this.style.removeProperty(c(E))});return this.each(function(){this.style.cssText+=";"+a})},index:function(t){return t?this.indexOf(x(t)[0]):this.parent().children().indexOf(this[0])},hasClass:function(t){return t?k.some.call(this,function(t){return this.test(y(t))},l(t)):!1},addClass:function(t){return t?this.each(function(e){T=[];var n=y(this),i=m(this,t,e,n);i.split(/\s+/g).forEach(function(t){x(this).hasClass(t)||T.push(t)},this),T.length&&y(this,n+(n?" ":"")+T.join(" "))}):this},removeClass:function(t){return this.each(function(e){return t===A?y(this,""):(T=y(this),m(this,t,e,T).split(/\s+/g).forEach(function(t){T=T.replace(l(t)," ")}),void y(this,T.trim()))})},toggleClass:function(t,e){return t?this.each(function(n){var i=x(this),r=m(this,t,n,y(this));r.split(/\s+/g).forEach(function(t){(e===A?!i.hasClass(t):e)?i.addClass(t):i.removeClass(t)})}):this},scrollTop:function(t){if(this.length){var e="scrollTop"in this[0];return t===A?e?this[0].scrollTop:this[0].pageYOffset:this.each(e?function(){this.scrollTop=t}:function(){this.scrollTo(this.scrollX,t)})}},scrollLeft:function(t){if(this.length){var e="scrollLeft"in this[0];return t===A?e?this[0].scrollLeft:this[0].pageXOffset:this.each(e?function(){this.scrollLeft=t}:function(){this.scrollTo(t,this.scrollY)})}},position:function(){if(this.length){var t=this[0],e=this.offsetParent(),n=this.offset(),i=I.test(e[0].nodeName)?{top:0,left:0}:e.offset();return n.top-=parseFloat(x(t).css("margin-top"))||0,n.left-=parseFloat(x(t).css("margin-left"))||0,i.top+=parseFloat(x(e[0]).css("border-top-width"))||0,i.left+=parseFloat(x(e[0]).css("border-left-width"))||0,{top:n.top-i.top,left:n.left-i.left}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent||C.body;t&&!I.test(t.nodeName)&&"static"==x(t).css("position");)t=t.offsetParent;return t})}},x.fn.detach=x.fn.remove,["width","height"].forEach(function(t){var e=t.replace(/./,function(t){return t[0].toUpperCase()});x.fn[t]=function(r){var o,a=this[0];return r===A?n(a)?a["inner"+e]:i(a)?a.documentElement["scroll"+e]:(o=this.offset())&&o[t]:this.each(function(e){a=x(this),a.css(t,m(this,r,e,a[t]()))})}}),Z.forEach(function(e,n){var i=n%2;x.fn[e]=function(){var e,r,o=x.map(arguments,function(n){return e=t(n),"object"==e||"array"==e||null==n?n:J.fragment(n)}),a=this.length>1;return o.length<1?this:this.each(function(t,e){r=i?e:e.parentNode,e=0==n?e.nextSibling:1==n?e.firstChild:2==n?e:null;var s=x.contains(C.documentElement,r);o.forEach(function(t){if(a)t=t.cloneNode(!0);else if(!r)return x(t).remove();r.insertBefore(t,e),s&&b(t,function(t){null==t.nodeName||"SCRIPT"!==t.nodeName.toUpperCase()||t.type&&"text/javascript"!==t.type||t.src||window.eval.call(window,t.innerHTML)})})})},x.fn[i?e+"To":"insert"+(n?"Before":"After")]=function(t){return x(t)[e](this),this}}),J.Z.prototype=x.fn,J.uniq=L,J.deserializeValue=w,x.zepto=J,x}();window.Zepto=Zepto,void 0===window.$&&(window.$=Zepto),function(t){function e(t){return t._zid||(t._zid=d++)}function n(t,n,o,a){if(n=i(n),n.ns)var s=r(n.ns);return(m[e(t)]||[]).filter(function(t){return!(!t||n.e&&t.e!=n.e||n.ns&&!s.test(t.ns)||o&&e(t.fn)!==e(o)||a&&t.sel!=a)})}function i(t){var e=(""+t).split(".");return{e:e[0],ns:e.slice(1).sort().join(" ")}}function r(t){return new RegExp("(?:^| )"+t.replace(" "," .* ?")+"(?: |$)")}function o(t,e){return t.del&&!y&&t.e in w||!!e}function a(t){return b[t]||y&&w[t]||t}function s(n,r,s,u,l,d,h){var p=e(n),v=m[p]||(m[p]=[]);r.split(/\s/).forEach(function(e){if("ready"==e)return t(document).ready(s);var r=i(e);r.fn=s,r.sel=l,r.e in b&&(s=function(e){var n=e.relatedTarget;return!n||n!==this&&!t.contains(this,n)?r.fn.apply(this,arguments):void 0}),r.del=d;var p=d||s;r.proxy=function(t){if(t=c(t),!t.isImmediatePropagationStopped()){t.data=u;var e=p.apply(n,t._args==f?[t]:[t].concat(t._args));return e===!1&&(t.preventDefault(),t.stopPropagation()),e}},r.i=v.length,v.push(r),"addEventListener"in n&&n.addEventListener(a(r.e),r.proxy,o(r,h))})}function u(t,i,r,s,u){var c=e(t);(i||"").split(/\s/).forEach(function(e){n(t,e,r,s).forEach(function(e){delete m[c][e.i],"removeEventListener"in t&&t.removeEventListener(a(e.e),e.proxy,o(e,u))})})}function c(e,n){return(n||!e.isDefaultPrevented)&&(n||(n=e),t.each(T,function(t,i){var r=n[t];e[t]=function(){return this[i]=A,r&&r.apply(n,arguments)},e[i]=E}),(n.defaultPrevented!==f?n.defaultPrevented:"returnValue"in n?n.returnValue===!1:n.getPreventDefault&&n.getPreventDefault())&&(e.isDefaultPrevented=A)),e}function l(t){var e,n={originalEvent:t};for(e in t)x.test(e)||t[e]===f||(n[e]=t[e]);return c(n,t)}var f,d=1,h=Array.prototype.slice,p=t.isFunction,v=function(t){return"string"==typeof t},m={},g={},y="onfocusin"in window,w={focus:"focusin",blur:"focusout"},b={mouseenter:"mouseover",mouseleave:"mouseout"};g.click=g.mousedown=g.mouseup=g.mousemove="MouseEvents",t.event={add:s,remove:u},t.proxy=function(n,i){var r=2 in arguments&&h.call(arguments,2);if(p(n)){var o=function(){return n.apply(i,r?r.concat(h.call(arguments)):arguments)};return o._zid=e(n),o}if(v(i))return r?(r.unshift(n[i],n),t.proxy.apply(null,r)):t.proxy(n[i],n);throw new TypeError("expected function")},t.fn.bind=function(t,e,n){return this.on(t,e,n)},t.fn.unbind=function(t,e){return this.off(t,e)},t.fn.one=function(t,e,n,i){return this.on(t,e,n,i,1)};var A=function(){return!0},E=function(){return!1},x=/^([A-Z]|returnValue$|layer[XY]$)/,T={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"};t.fn.delegate=function(t,e,n){return this.on(e,t,n)},t.fn.undelegate=function(t,e,n){return this.off(e,t,n)},t.fn.live=function(e,n){return t(document.body).delegate(this.selector,e,n),this},t.fn.die=function(e,n){return t(document.body).undelegate(this.selector,e,n),this},t.fn.on=function(e,n,i,r,o){var a,c,d=this;return e&&!v(e)?(t.each(e,function(t,e){d.on(t,n,i,e,o)}),d):(v(n)||p(r)||r===!1||(r=i,i=n,n=f),(p(i)||i===!1)&&(r=i,i=f),r===!1&&(r=E),d.each(function(f,d){o&&(a=function(t){return u(d,t.type,r),r.apply(this,arguments)}),n&&(c=function(e){var i,o=t(e.target).closest(n,d).get(0);return o&&o!==d?(i=t.extend(l(e),{currentTarget:o,liveFired:d}),(a||r).apply(o,[i].concat(h.call(arguments,1)))):void 0}),s(d,e,r,i,n,c||a)}))},t.fn.off=function(e,n,i){var r=this;return e&&!v(e)?(t.each(e,function(t,e){r.off(t,n,e)}),r):(v(n)||p(i)||i===!1||(i=n,n=f),i===!1&&(i=E),r.each(function(){u(this,e,i,n)}))},t.fn.trigger=function(e,n){return e=v(e)||t.isPlainObject(e)?t.Event(e):c(e),e._args=n,this.each(function(){"dispatchEvent"in this?this.dispatchEvent(e):t(this).triggerHandler(e,n)})},t.fn.triggerHandler=function(e,i){var r,o;return this.each(function(a,s){r=l(v(e)?t.Event(e):e),r._args=i,r.target=s,t.each(n(s,e.type||e),function(t,e){return o=e.proxy(r),r.isImmediatePropagationStopped()?!1:void 0})}),o},"focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select keydown keypress keyup error".split(" ").forEach(function(e){t.fn[e]=function(t){return t?this.bind(e,t):this.trigger(e)}}),["focus","blur"].forEach(function(e){t.fn[e]=function(t){return t?this.bind(e,t):this.each(function(){try{this[e]()}catch(t){}}),this}}),t.Event=function(t,e){v(t)||(e=t,t=e.type);var n=document.createEvent(g[t]||"Events"),i=!0;if(e)for(var r in e)"bubbles"==r?i=!!e[r]:n[r]=e[r];return n.initEvent(t,i,!0),c(n)}}(Zepto),function(t){function e(e,n,i){var r=t.Event(n);return t(e).trigger(r,i),!r.isDefaultPrevented()}function n(t,n,i,r){return t.global?e(n||y,i,r):void 0}function i(e){e.global&&0===t.active++&&n(e,null,"ajaxStart")}function r(e){e.global&&!--t.active&&n(e,null,"ajaxStop")}function o(t,e){var i=e.context;return e.beforeSend.call(i,t,e)===!1||n(e,i,"ajaxBeforeSend",[t,e])===!1?!1:void n(e,i,"ajaxSend",[t,e])}function a(t,e,i,r){var o=i.context,a="success";i.success.call(o,t,a,e),r&&r.resolveWith(o,[t,a,e]),n(i,o,"ajaxSuccess",[e,i,t]),u(a,e,i)}function s(t,e,i,r,o){var a=r.context;r.error.call(a,i,e,t),o&&o.rejectWith(a,[i,e,t]),n(r,a,"ajaxError",[i,r,t||e]),u(e,i,r)}function u(t,e,i){var o=i.context;i.complete.call(o,e,t),n(i,o,"ajaxComplete",[e,i]),r(i)}function c(){}function l(t){return t&&(t=t.split(";",2)[0]),t&&(t==x?"html":t==E?"json":b.test(t)?"script":A.test(t)&&"xml")||"text"}function f(t,e){return""==e?t:(t+"&"+e).replace(/[&?]{1,2}/,"?")}function d(e){e.processData&&e.data&&"string"!=t.type(e.data)&&(e.data=t.param(e.data,e.traditional)),!e.data||e.type&&"GET"!=e.type.toUpperCase()||(e.url=f(e.url,e.data),e.data=void 0)}function h(e,n,i,r){return t.isFunction(n)&&(r=i,i=n,n=void 0),t.isFunction(i)||(r=i,i=void 0),{url:e,data:n,success:i,dataType:r}}function p(e,n,i,r){var o,a=t.isArray(n),s=t.isPlainObject(n);t.each(n,function(n,u){o=t.type(u),r&&(n=i?r:r+"["+(s||"object"==o||"array"==o?n:"")+"]"),!r&&a?e.add(u.name,u.value):"array"==o||!i&&"object"==o?p(e,u,i,n):e.add(n,u)})}var v,m,g=0,y=window.document,w=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,b=/^(?:text|application)\/javascript/i,A=/^(?:text|application)\/xml/i,E="application/json",x="text/html",T=/^\s*$/;t.active=0,t.ajaxJSONP=function(e,n){if(!("type"in e))return t.ajax(e);var i,r,u=e.jsonpCallback,c=(t.isFunction(u)?u():u)||"jsonp"+ ++g,l=y.createElement("script"),f=window[c],d=function(e){t(l).triggerHandler("error",e||"abort")},h={abort:d};return n&&n.promise(h),t(l).on("load error",function(o,u){clearTimeout(r),t(l).off().remove(),"error"!=o.type&&i?a(i[0],h,e,n):s(null,u||"error",h,e,n),window[c]=f,i&&t.isFunction(f)&&f(i[0]),f=i=void 0}),o(h,e)===!1?(d("abort"),h):(window[c]=function(){i=arguments},l.src=e.url.replace(/\?(.+)=\?/,"?$1="+c),y.head.appendChild(l),e.timeout>0&&(r=setTimeout(function(){d("timeout")},e.timeout)),h)},t.ajaxSettings={type:"GET",beforeSend:c,success:c,error:c,complete:c,context:null,global:!0,xhr:function(){return new window.XMLHttpRequest},accepts:{script:"text/javascript, application/javascript, application/x-javascript",json:E,xml:"application/xml, text/xml",html:x,text:"text/plain"},crossDomain:!1,timeout:0,processData:!0,cache:!0},t.ajax=function(e){var n=t.extend({},e||{}),r=t.Deferred&&t.Deferred();for(v in t.ajaxSettings)void 0===n[v]&&(n[v]=t.ajaxSettings[v]);i(n),n.crossDomain||(n.crossDomain=/^([\w-]+:)?\/\/([^\/]+)/.test(n.url)&&RegExp.$2!=window.location.host),n.url||(n.url=window.location.toString()),d(n);var u=n.dataType,h=/\?.+=\?/.test(n.url);if(h&&(u="jsonp"),n.cache!==!1&&(e&&e.cache===!0||"script"!=u&&"jsonp"!=u)||(n.url=f(n.url,"_="+Date.now())),"jsonp"==u)return h||(n.url=f(n.url,n.jsonp?n.jsonp+"=?":n.jsonp===!1?"":"callback=?")),t.ajaxJSONP(n,r);var p,g=n.accepts[u],y={},w=function(t,e){y[t.toLowerCase()]=[t,e]},b=/^([\w-]+:)\/\//.test(n.url)?RegExp.$1:window.location.protocol,A=n.xhr(),E=A.setRequestHeader;if(r&&r.promise(A),n.crossDomain||w("X-Requested-With","XMLHttpRequest"),w("Accept",g||"*/*"),(g=n.mimeType||g)&&(g.indexOf(",")>-1&&(g=g.split(",",2)[0]),A.overrideMimeType&&A.overrideMimeType(g)),(n.contentType||n.contentType!==!1&&n.data&&"GET"!=n.type.toUpperCase())&&w("Content-Type",n.contentType||"application/x-www-form-urlencoded"),n.headers)for(m in n.headers)w(m,n.headers[m]);if(A.setRequestHeader=w,A.onreadystatechange=function(){if(4==A.readyState){A.onreadystatechange=c,clearTimeout(p);var e,i=!1;if(A.status>=200&&A.status<300||304==A.status||0==A.status&&"file:"==b){u=u||l(n.mimeType||A.getResponseHeader("content-type")),e=A.responseText;try{"script"==u?(1,eval)(e):"xml"==u?e=A.responseXML:"json"==u&&(e=T.test(e)?null:t.parseJSON(e))}catch(o){i=o}i?s(i,"parsererror",A,n,r):a(e,A,n,r)}else s(A.statusText||null,A.status?"error":"abort",A,n,r)}},o(A,n)===!1)return A.abort(),s(null,"abort",A,n,r),A;if(n.xhrFields)for(m in n.xhrFields)A[m]=n.xhrFields[m];var x="async"in n?n.async:!0;A.open(n.type,n.url,x,n.username,n.password);for(m in y)E.apply(A,y[m]);return n.timeout>0&&(p=setTimeout(function(){A.onreadystatechange=c,A.abort(),s(null,"timeout",A,n,r)},n.timeout)),A.send(n.data?n.data:null),A},t.get=function(){return t.ajax(h.apply(null,arguments))},t.post=function(){var e=h.apply(null,arguments);return e.type="POST",t.ajax(e)},t.getJSON=function(){var e=h.apply(null,arguments);return e.dataType="json",t.ajax(e)},t.fn.load=function(e,n,i){if(!this.length)return this;var r,o=this,a=e.split(/\s/),s=h(e,n,i),u=s.success;return a.length>1&&(s.url=a[0],r=a[1]),s.success=function(e){o.html(r?t("<div>").html(e.replace(w,"")).find(r):e),u&&u.apply(o,arguments)},t.ajax(s),this};var S=encodeURIComponent;t.param=function(t,e){var n=[];return n.add=function(t,e){this.push(S(t)+"="+S(e))},p(n,t,e),n.join("&").replace(/%20/g,"+")}}(Zepto),function(t){t.fn.serializeArray=function(){var e,n=[];return t([].slice.call(this.get(0).elements)).each(function(){e=t(this);var i=e.attr("type");"fieldset"!=this.nodeName.toLowerCase()&&!this.disabled&&"submit"!=i&&"reset"!=i&&"button"!=i&&("radio"!=i&&"checkbox"!=i||this.checked)&&n.push({name:e.attr("name"),value:e.val()})}),n},t.fn.serialize=function(){var t=[];return this.serializeArray().forEach(function(e){t.push(encodeURIComponent(e.name)+"="+encodeURIComponent(e.value))}),t.join("&")},t.fn.submit=function(e){if(e)this.bind("submit",e);else if(this.length){var n=t.Event("submit");this.eq(0).trigger(n),n.isDefaultPrevented()||this.get(0).submit()}return this}}(Zepto),function(t){"__proto__"in{}||t.extend(t.zepto,{Z:function(e,n){return e=e||[],t.extend(e,t.fn),e.selector=n||"",e.__Z=!0,e},isZ:function(e){return"array"===t.type(e)&&"__Z"in e}});try{getComputedStyle(void 0)}catch(e){var n=getComputedStyle;window.getComputedStyle=function(t){try{return n(t)}catch(e){return null}}}}(Zepto),function(t){var e,n=[];t.fn.remove=function(){return this.each(function(){this.parentNode&&("IMG"===this.tagName&&(n.push(this),this.src="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=",e&&clearTimeout(e),e=setTimeout(function(){n=[]},6e4)),this.parentNode.removeChild(this))})}}(Zepto),function(t){function e(e,i){var u=e[s],c=u&&r[u];if(void 0===i)return c||n(e);if(c){if(i in c)return c[i];var l=a(i);if(l in c)return c[l]}return o.call(t(e),i)}function n(e,n,o){var u=e[s]||(e[s]=++t.uuid),c=r[u]||(r[u]=i(e));return void 0!==n&&(c[a(n)]=o),c}function i(e){var n={};return t.each(e.attributes||u,function(e,i){0==i.name.indexOf("data-")&&(n[a(i.name.replace("data-",""))]=t.zepto.deserializeValue(i.value))}),n}var r={},o=t.fn.data,a=t.camelCase,s=t.expando="Zepto"+ +new Date,u=[];t.fn.data=function(i,r){return void 0===r?t.isPlainObject(i)?this.each(function(e,r){t.each(i,function(t,e){n(r,t,e)})}):0 in this?e(this[0],i):void 0:this.each(function(){n(this,i,r)})},t.fn.removeData=function(e){return"string"==typeof e&&(e=e.split(/\s+/)),this.each(function(){var n=this[s],i=n&&r[n];i&&t.each(e||i,function(t){delete i[e?a(this):t]})})},["remove","empty"].forEach(function(e){var n=t.fn[e];t.fn[e]=function(){var t=this.find("*");return"remove"===e&&(t=t.add(this)),t.removeData(),n.call(this)}})}(Zepto),function(t){function e(e){return e=t(e),!(!e.width()&&!e.height())&&"none"!==e.css("display")}function n(t,e){t=t.replace(/=#\]/g,'="#"]');var n,i,r=s.exec(t);if(r&&r[2]in a&&(n=a[r[2]],i=r[3],t=r[1],i)){var o=Number(i);i=isNaN(o)?i.replace(/^["']|["']$/g,""):o}return e(t,n,i)}var i=t.zepto,r=i.qsa,o=i.matches,a=t.expr[":"]={visible:function(){return e(this)?this:void 0},hidden:function(){return e(this)?void 0:this},selected:function(){return this.selected?this:void 0},checked:function(){return this.checked?this:void 0},parent:function(){return this.parentNode},first:function(t){return 0===t?this:void 0},last:function(t,e){return t===e.length-1?this:void 0},eq:function(t,e,n){return t===n?this:void 0},contains:function(e,n,i){return t(this).text().indexOf(i)>-1?this:void 0},has:function(t,e,n){return i.qsa(this,n).length?this:void 0}},s=new RegExp("(.*):(\\w+)(?:\\(([^)]+)\\))?$\\s*"),u=/^\s*>/,c="Zepto"+ +new Date;i.qsa=function(e,o){return n(o,function(n,a,s){try{var l;!n&&a?n="*":u.test(n)&&(l=t(e).addClass(c),n="."+c+" "+n);var f=r(e,n)}catch(d){throw console.error("error performing selector: %o",o),d}finally{l&&l.removeClass(c)}return a?i.uniq(t.map(f,function(t,e){return a.call(t,e,f,s)})):f})},i.matches=function(t,e){return n(e,function(e,n,i){return!(e&&!o(t,e)||n&&n.call(t,null,i)!==t)})}}(Zepto),function(t){function e(t,e,n,i){return Math.abs(t-e)>=Math.abs(n-i)?t-e>0?"Left":"Right":n-i>0?"Up":"Down"}function n(){l=null,d.last&&(d.el.trigger("longTap"),d={})}function i(){l&&clearTimeout(l),l=null}function r(){s&&clearTimeout(s),u&&clearTimeout(u),c&&clearTimeout(c),l&&clearTimeout(l),s=u=c=l=null,d={}}function o(t){return("touch"==t.pointerType||t.pointerType==t.MSPOINTER_TYPE_TOUCH)&&t.isPrimary}function a(t,e){return t.type=="pointer"+e||t.type.toLowerCase()=="mspointer"+e}var s,u,c,l,f,d={},h=750;t(document).ready(function(){var p,v,m,g,y=0,w=0;"MSGesture"in window&&(f=new MSGesture,f.target=document.body),t(document).bind("MSGestureEnd",function(t){var e=t.velocityX>1?"Right":t.velocityX<-1?"Left":t.velocityY>1?"Down":t.velocityY<-1?"Up":null;e&&(d.el.trigger("swipe"),d.el.trigger("swipe"+e))}).on("touchstart MSPointerDown pointerdown",function(e){(!(g=a(e,"down"))||o(e))&&(m=g?e:e.touches[0],e.touches&&1===e.touches.length&&d.x2&&(d.x2=void 0,d.y2=void 0),p=Date.now(),v=p-(d.last||p),d.el=t("tagName"in m.target?m.target:m.target.parentNode),s&&clearTimeout(s),d.x1=m.pageX,d.y1=m.pageY,v>0&&250>=v&&(d.isDoubleTap=!0),d.last=p,l=setTimeout(n,h),f&&g&&f.addPointer(e.pointerId))}).on("touchmove MSPointerMove pointermove",function(t){(!(g=a(t,"move"))||o(t))&&(m=g?t:t.touches[0],i(),d.x2=m.pageX,d.y2=m.pageY,y+=Math.abs(d.x1-d.x2),w+=Math.abs(d.y1-d.y2))}).on("touchend MSPointerUp pointerup",function(n){(!(g=a(n,"up"))||o(n))&&(i(),d.x2&&Math.abs(d.x1-d.x2)>30||d.y2&&Math.abs(d.y1-d.y2)>30?c=setTimeout(function(){d.el.trigger("swipe"),d.el.trigger("swipe"+e(d.x1,d.x2,d.y1,d.y2)),d={}},0):"last"in d&&(30>y&&30>w?u=setTimeout(function(){var e=t.Event("tap");e.cancelTouch=r,d.el.trigger(e),d.isDoubleTap?(d.el&&d.el.trigger("doubleTap"),d={}):s=setTimeout(function(){s=null,d.el&&d.el.trigger("singleTap"),d={}},250)},0):d={}),y=w=0)}).on("touchcancel MSPointerCancel pointercancel",r),t(window).on("scroll",r)}),["swipe","swipeLeft","swipeRight","swipeUp","swipeDown","doubleTap","tap","singleTap","longTap"].forEach(function(e){t.fn[e]=function(t){return this.on(e,t)}})}(Zepto),window.isRetina=function(t){if(t.devicePixelRatio>1)return!0;var e="(-webkit-min-device-pixel-ratio: 1.5),  	                  (min--moz-device-pixel-ratio: 1.5),  	                  (-o-min-device-pixel-ratio: 3/2),  	                  (min-resolution: 1.5dppx)";return!(!t.matchMedia||!t.matchMedia(e).matches)}(window),function(t,e){t.fn.unveil=function(n,i){function r(){var e=u.filter(function(){var e=t(this);if(!e.is(":hidden")){var n=a.scrollTop(),i=n+a.height(),r=e.offset().top,o=r+e.height();return o>=n-s&&i+s>=r}});o=e.trigger("unveil"),u=u.not(o)}var o,a=t(window),s=n||0,u=this;return this.one("unveil",function(){var t=this.getAttribute("data-src");e&&(t=toRetina(t)),t&&(this.setAttribute("src",t),"function"==typeof i&&i.call(this))}),a.scroll(r),a.resize(r),r(),this}}(window.jQuery||window.Zepto,window.isRetina),!function(){"use strict";function t(){o[v.id]=document.body.cloneNode(!0)}var e,n=function(){},i=20,r=sessionStorage,o={},a={"slide-in":"slide-out","slide-out":"slide-in",fade:"fade"},s={bartab:".bar-tab",barnav:".bar-nav",barfooter:".bar-footer",barheadersecondary:".bar-header-secondary"},u=function(t,e){v.id=t.id,e&&(t=f(t.id)),r[t.id]=JSON.stringify(t),window.history.replaceState(t.id,t.title,t.url)},c=function(){var t=v.id,e=JSON.parse(r.cacheForwardStack||"[]"),n=JSON.parse(r.cacheBackStack||"[]");for(n.push(t);e.length;)delete r[e.shift()];for(;n.length>i;)delete r[n.shift()];window.history.pushState(null,"",f(v.id).url),r.cacheForwardStack=JSON.stringify(e),r.cacheBackStack=JSON.stringify(n)},l=function(t,e){var n="forward"===e,i=JSON.parse(r.cacheForwardStack||"[]"),o=JSON.parse(r.cacheBackStack||"[]"),a=n?o:i,s=n?i:o;
v.id&&a.push(v.id),s.pop(),r.cacheForwardStack=JSON.stringify(i),r.cacheBackStack=JSON.stringify(o)},f=function(t){return JSON.parse(r[t]||null)||{}},d=function(t){var n=b(t.target);if(!(!n||t.which>1||t.metaKey||t.ctrlKey||e||location.protocol!==n.protocol||location.host!==n.host||!n.hash&&/#/.test(n.href)||n.hash&&n.href.replace(n.hash,"")===location.href.replace(location.hash,"")||"push"===n.getAttribute("data-ignore")))return n},h=function(t){var e=d(t);e&&(t.preventDefault(),v({url:e.href,hash:e.hash,timeout:e.getAttribute("data-timeout"),transition:e.getAttribute("data-transition")}))},p=function(t){var e,n,i,u,c,d,h,p,m=t.state;if(m&&r[m]){if(c=v.id<m?"forward":"back",l(m,c),i=f(m),u=o[m],i.title&&(document.title=i.title),"back"===c?(h=JSON.parse("back"===c?r.cacheForwardStack:r.cacheBackStack),p=f(h[h.length-1])):p=i,"back"===c&&!p.id)return v.id=m;if(d="back"===c?a[p.transition]:p.transition,!u)return v({id:i.id,url:i.url,title:i.title,timeout:i.timeout,transition:d,ignorePush:!0});if(p.transition){i=E(i,".content",u.cloneNode(!0));for(e in s)s.hasOwnProperty(e)&&(n=document.querySelector(s[e]),i[e]?y(i[e],n):n&&n.parentNode.removeChild(n))}y((i.contents||u).cloneNode(!0),document.querySelector(".content"),d,function(){w()}),v.id=m,document.body.offsetHeight}},v=function(e){var i,r=v.xhr;e.container=e.container||e.transition?document.querySelector(".content"):document.body;for(i in s)s.hasOwnProperty(i)&&(e[i]=e[i]||document.querySelector(s[i]));r&&r.readyState<4&&(r.onreadystatechange=n,r.abort()),r=new XMLHttpRequest,r.open("GET",e.url,!0),r.setRequestHeader("X-PUSH","true"),r.onreadystatechange=function(){e._timeout&&clearTimeout(e._timeout),4===r.readyState&&(200===r.status?m(r,e):g(e.url))},v.id||u({id:+new Date,url:window.location.href,title:document.title,timeout:e.timeout,transition:e.transition}),t(),e.timeout&&(e._timeout=setTimeout(function(){r.abort("timeout")},e.timeout)),r.send(),r.readyState&&!e.ignorePush&&c()},m=function(t,e){var n,i,r=x(t,e);if(!r.contents)return A(e.url);if(r.title&&(document.title=r.title),e.transition)for(n in s)s.hasOwnProperty(n)&&(i=document.querySelector(s[n]),r[n]?y(r[n],i):i&&i.parentNode.removeChild(i));y(r.contents,e.container,e.transition,function(){u({id:e.id||+new Date,url:r.url,title:r.title,timeout:e.timeout,transition:e.transition},e.id),w()}),!e.ignorePush&&window._gaq&&_gaq.push(["_trackPageview"]),!e.hash},g=function(t){throw new Error("Could not get: "+t)},y=function(t,e,n,i){var r,o,a;if(n?(r=/in$/.test(n),"fade"===n&&(e.classList.add("in"),e.classList.add("fade"),t.classList.add("fade")),/slide/.test(n)&&(t.classList.add("sliding-in",r?"right":"left"),t.classList.add("sliding"),e.classList.add("sliding")),e.parentNode.insertBefore(t,e)):e?e.innerHTML=t.innerHTML:t.classList.contains("content")?document.body.appendChild(t):document.body.insertBefore(t,document.querySelector(".content")),n||i&&i(),"fade"===n){e.offsetWidth,e.classList.remove("in");var s=function(){e.removeEventListener("webkitTransitionEnd",s),t.classList.add("in"),t.addEventListener("webkitTransitionEnd",u)},u=function(){t.removeEventListener("webkitTransitionEnd",u),e.parentNode.removeChild(e),t.classList.remove("fade"),t.classList.remove("in"),i&&i()};e.addEventListener("webkitTransitionEnd",s)}if(/slide/.test(n)){var c=function(){t.removeEventListener("webkitTransitionEnd",c),t.classList.remove("sliding","sliding-in"),t.classList.remove(a),e.parentNode.removeChild(e),i&&i()};e.offsetWidth,a=r?"right":"left",o=r?"left":"right",e.classList.add(o),t.classList.remove(a),t.addEventListener("webkitTransitionEnd",c)}},w=function(){var t=new CustomEvent("push",{detail:{state:f(v.id)},bubbles:!0,cancelable:!0});window.dispatchEvent(t)},b=function(t){for(var e,n=document.querySelectorAll("a");t&&t!==document;t=t.parentNode)for(e=n.length;e--;)if(n[e]===t)return t},A=function(t){window.history.replaceState(null,"","#"),window.location.replace(t)},E=function(t,e,n){var i,r={};for(i in t)t.hasOwnProperty(i)&&(r[i]=t[i]);return Object.keys(s).forEach(function(t){var e=n.querySelector(s[t]);e&&e.parentNode.removeChild(e),r[t]=e}),r.contents=n.querySelector(e),r},x=function(t,e){var n,i,r={},o=t.responseText;if(r.url=e.url,!o)return r;/<html/i.test(o)?(n=document.createElement("div"),i=document.createElement("div"),n.innerHTML=o.match(/<head[^>]*>([\s\S.]*)<\/head>/i)[0],i.innerHTML=o.match(/<body[^>]*>([\s\S.]*)<\/body>/i)[0]):(n=i=document.createElement("div"),n.innerHTML=o),r.title=n.querySelector("title");var a="innerText"in r.title?"innerText":"textContent";return r.title=r.title&&r.title[a].trim(),e.transition?r=E(r,".content",i):r.contents=i,r};window.addEventListener("touchstart",function(){e=!1}),window.addEventListener("touchmove",function(){e=!0}),window.addEventListener("touchend",h),window.addEventListener("click",function(t){d(t)&&t.preventDefault()}),window.addEventListener("popstate",p),window.PUSH=v}();var Clickable=function(t,e,n,i){function r(){var e,n,i,r=t.navigator.userAgent;(i=/\bCPU.*OS (\d+(_\d+)?)/i.exec(r))?(e="ios",n=i[1].replace("_",".")):(i=/\bAndroid (\d+(\.\d+)?)/.exec(r))&&(e="android",n=i[1]);var o={name:e,version:n&&t.parseFloat(n)};return o[e]=!0,o}function o(t){return String(t).replace(p,"")}function a(t){if(!t)return!1;try{return t instanceof Node||t instanceof HTMLElement}catch(e){}return"object"!=typeof t?!1:"number"!=typeof t.nodeType?!1:"string"!=typeof t.nodeName?!1:!0}function s(t){for(;t=t.parentNode;)if(t===e)return!0;return!1}function u(){return g.ios||g.android}function c(n,i){function r(){n.addEventListener("touchstart",w,!1),n.addEventListener("touchmove",b,!1),n.addEventListener("touchend",A,!1),n.addEventListener("touchcancel",b,!1)}function c(){n.removeEventListener("touchstart",w),n.removeEventListener("touchmove",b),n.removeEventListener("touchend",A),n.removeEventListener("touchcancel",b)}function l(){n.className+=" "+i}function f(){n.className=o(n.className.replace(T,""))}function d(t,e){do{if(t===e)return!0;if(t._clickable)return!1}while(t=t.parentNode);return!1}function h(t){return L=!1,n.disabled||!d(t.target,n)?(t.preventDefault(),void(S=!1)):(S=!0,void l())}function p(t){t.preventDefault(),S=!1,L=!1,f()}function y(t){return n.disabled?(t.preventDefault(),S=!1,void(L=!1)):(S?L=!0:(t.preventDefault(),L=!1),S=!1,void f())}function w(t){if(L=!1,m||n.disabled||1!==t.touches.length||!d(t.target,n))return void(S=!1);m=!0,S=!0,x=+new Date;var e=x;setTimeout(function(){S&&e===x&&l()},v)}function b(t){L=!1,S=!1,t&&(m=!1),n.disabled||f()}function A(i){function r(){L=!0;var i=e.createEvent("MouseEvents");i.initMouseEvent("click",!0,!0,t,1,0,0,0,0,!1,!1,!1,!1,0,null),n.dispatchEvent(i)}var o=S;if(b(),!o||n.disabled)return void(m=!1);if(!i.stopImmediatePropagation)return void(L=!0);var a=+new Date-x;a>v?r():(l(),setTimeout(function(){f(),r()},1))}function E(e){return e=e||t.event,!n.disabled&&L?(L=!1,void setTimeout(function(){m=!1},0)):(e.stopImmediatePropagation&&e.stopImmediatePropagation(),e.preventDefault(),e.stopPropagation(),e.cancelBubble=!0,e.returnValue=!1,!1)}if(!a(n))throw TypeError("element "+n+" must be a DOM element");if(!n._clickable){switch(n._clickable=!0,typeof i){case"undefined":i="active";case"string":break;default:throw TypeError("active class "+i+" must be a string")}n.setAttribute("data-clickable-class",i);var x,T=new RegExp("\\b"+i+"\\b"),S=!1,L=!1;if(!u())return void(n.addEventListener?(n.addEventListener("mousedown",h,!1),n.addEventListener("mousemove",p,!1),n.addEventListener("mouseout",p,!1),n.addEventListener("mouseup",y,!1),n.addEventListener("click",E,!1)):n.attachEvent&&(n.attachEvent("onmousedown",h),n.attachEvent("onmousemove",p),n.attachEvent("onmouseout",p),n.attachEvent("onmouseup",y),n.attachEvent("onclick",E)));n.style["-webkit-tap-highlight-color"]="rgba(255,255,255,0)",n.addEventListener("click",E,!1),g.ios?(n.addEventListener("DOMNodeInsertedIntoDocument",r,!1),n.addEventListener("DOMNodeRemovedFromDocument",c,!1),s(n)&&r()):r()}}function l(e,n,i){function r(){function n(){o||(o=!0,e.disabled&&(e.disabled=!1,e.className=e.className.replace(new RegExp("\\b"+a+"\\b","g"),"")))}var r,o=!1,a=e.getAttribute("data-clickable-class")||"active";e.disabled=!0,e.className+=" "+a;try{r=i(n)}catch(s){t.console&&t.console.error&&t.console.error(s+""),n()}r===!1&&n()}if(!a(e))throw TypeError("button must be a DOM element, got "+e);switch(typeof n){case"string":break;case"function":i=n,n=void 0;break;default:throw TypeError("button active class must be a string if defined, got "+n)}if("function"!=typeof i)throw TypeError("sticky click handler must be a function, got "+i);c(e),e.addEventListener("click",r,!1)}function f(){n&&n.extend(n.fn,{clickable:function(t){return this.forEach(function(e){c(e,t)}),this},stickyClick:function(t){return this.forEach(function(e){l(e,t)}),this}})}function d(){i&&(i.fn.clickable=function(t){return this.each(function(){c(this,t)}),this},i.fn.stickyClick=function(t){return this.each(function(){l(this,t)}),this})}function h(){function t(){c.apply(this,arguments)}return f(),d(),t.touchable=function(){return u()},t.sticky=function(){l.apply(this,arguments)},t}var p=/^\s+|\s+$/g,v=40,m=!1,g=r();return h()}(window,document,window.Zepto,window.jQuery);window.platform=function(t,e){var n,i=function(t){var e,n,i,r=/([^&=]+)=([^&]+)/g,o=/\+/g,a={};if(t)for(t=t.replace(o,"%20");e=r.exec(t);)n=decodeURIComponent(e[1]),i=decodeURIComponent(e[2]),a[n]=i;return a}(t.location.href.split("?")[1]);return"android"===i._app_platform?n="android":"ios"===i._app_platform?n="ios":/\bCPU.*OS (\d+(_\d+)?)/i.exec(e)?n="ios":/\bAndroid (\d+(\.\d+)?)/.exec(e)&&(n="android"),n}(window,navigator.userAgent);var PhotoViewer=function(t){function e(s,u,l){function f(){if(!s)throw new TypeError("Page argument required!");if(!u)throw new TypeError("You gave me an empty list of urls, I can't do anything with that!");if(!Array.isArray(u))throw new TypeError("PhotoViewer setSource expects an array of photo URLs for a source, '"+newSource+"' given.");l=l||{};for(var t in c)c.hasOwnProperty(t)&&(l[t]=void 0===l[t]?c[t]:l[t])}function d(){b&&(b.refreshSize(),b.eachMaster(function(t){var e=t.querySelector("div"),n=t.querySelector("img");e&&n&&w(e,n)}))}function h(){if(s.removeEventListener("appShow",y,!1),s.removeEventListener("appLayout",d,!1),s.removeEventListener("appBack",h,!1),b){if("android"===t){b.disable3d();var e=b.curMaster(),n=e.querySelector("img");n.style.webkitBackfaceVisibility="",x.style.overflow="hidden"}b.eachMaster(function(t,e){e!==b.page()&&(t.style.visibility="hidden")})}}function p(){L?v():m()}function v(){"ios"==t?(T.style.opacity="1",T.style.pointerEvents=""):a(T,""),L=!1}function m(){"ios"==t?(T.style.opacity="0",T.style.pointerEvents="none"):a(T,"translate3d(0, -100%, 0)"),L=!0}function g(t,e){l.automaticTitles&&(S.innerText=t+1+" of "+e)}function y(){function n(t){var e=document.createElement("div"),n=e.style;n.position="absolute",n.top="0px",n.left="0px",n.width="100%",n.height="100%",n.overflow="hidden",n.background="black";var i=l.loadingElm.cloneNode(!0);e.appendChild(i);var r=document.createElement("img");return r.src=u[t],r.style.webkitBackfaceVisibility="hidden",r.style.webkitUserSelect="none",r.style.webkitUserDrag="none",r.style.margin="0 auto",r.style.display="none",r.onload=function(){w(e,r),r.style.display="block",e.removeChild(i)},e.appendChild(r),e}function i(t,n){if(g(t,u.length),e._Zoomable.deviceSupported){var i=n.querySelector("div"),r=n.querySelector("img");a&&a.reset().destroy(),a=new e._Zoomable(i,r,b)}E.fire("flip",t)}"ios"==t?o(T,"opacity 0.5s ease-in-out 200ms"):o(T,"transform 0.5s ease-in-out 200ms"),r(x,k),b=new e._SlideViewer(k,n,{allowScroll:!1,length:u.length,startAt:l.startAt,bufferDist:50}),b.on("flip",i),i(l.startAt,b.curMaster()),"ios"==t&&b.on("move",m);var a}function w(t,e){var n=e.naturalHeight,r=e.naturalWidth,o=n/r,a=l.autoHideTitle?window.innerHeight:x.offsetHeight,s=x.offsetWidth;n>a&&(n=a,r=n/o),r>s&&(r=s,n=r*o);var u=l.autoHideTitle?T.offsetHeight:0,c=i(Math.max((a-n)/2,0)),f=e.style;f.marginTop=c+"px",f.width=r+"px",f.height=n+"px";var d=t.style;d.width=s+"px",d.height=a+"px",d.top=-u+"px"}var b,A=this,E=new n,x=s;x.setAttribute("data-no-scroll","true"),x.style.overflow="visible";var T=document.getElementById("content").querySelector("header"),S=T.querySelector(".title"),L=!0,k=document.createElement("div");k.style.width="100%",k.style.height="100%",A.on=E.on,A.off=E.off,f(),A.resize=d,A.kill=h,l.loadingElm.style.webkitBackfaceVisibility="hidden",r(x,l.loadingElm),l.autoHideTitle&&(Clickable(k),k.addEventListener("click",p,!1)),g(l.startAt,u.length),s.addEventListener("appLayout",d,!1),s.addEventListener("appBack",h,!1),y()}function n(){function t(t,e){for(var n=0;n<t.length;n++)t[n]===e&&t.splice(n,1)}var e=this,n={};e.callbacks=n,e.on=function(i,r){var o=n[i]||[];return t(o,r),o.push(r),n[i]=o,e},e.off=function(i,r){if(void 0===r)return delete n[i],e;var o=n[i];return o?(t(o,r),e):e},e.fire=function(t){var i=n[t];if(i){for(var r=Array.prototype.slice.call(arguments,1),o=0;o<i.length;o++)i[o].apply(null,r);return e}}}function i(t,e){void 0===e&&(e=0);var n=Math.pow(10,e);return Math.round(t*n)/n}function r(t,e){for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(e)}function o(t,e){t.style.transition=e,t.style.webkitTransition="-webkit-"+e}function a(t,e){t.style.transform=e,t.style.webkitTransform=e}var s=["data:image/gif;base64,","R0lGODlhEAAQAPIAAAAAAP///zw8PLy8vP///5ycnHx8fGxsbCH+GkNyZWF0ZWQgd2l0aCBhamF4","bG9hZC5pbmZvACH5BAAKAAAAIf8LTkVUU0NBUEUyLjADAQAAACwAAAAAEAAQAAADMwi63P4wyklr","E2MIOggZnAdOmGYJRbExwroUmcG2LmDEwnHQLVsYOd2mBzkYDAdKa+dIAAAh+QQACgABACwAAAAA","EAAQAAADNAi63P5OjCEgG4QMu7DmikRxQlFUYDEZIGBMRVsaqHwctXXf7WEYB4Ag1xjihkMZsiUk","KhIAIfkEAAoAAgAsAAAAABAAEAAAAzYIujIjK8pByJDMlFYvBoVjHA70GU7xSUJhmKtwHPAKzLO9","HMaoKwJZ7Rf8AYPDDzKpZBqfvwQAIfkEAAoAAwAsAAAAABAAEAAAAzMIumIlK8oyhpHsnFZfhYum","CYUhDAQxRIdhHBGqRoKw0R8DYlJd8z0fMDgsGo/IpHI5TAAAIfkEAAoABAAsAAAAABAAEAAAAzII","unInK0rnZBTwGPNMgQwmdsNgXGJUlIWEuR5oWUIpz8pAEAMe6TwfwyYsGo/IpFKSAAAh+QQACgAF","ACwAAAAAEAAQAAADMwi6IMKQORfjdOe82p4wGccc4CEuQradylesojEMBgsUc2G7sDX3lQGBMLAJ","ibufbSlKAAAh+QQACgAGACwAAAAAEAAQAAADMgi63P7wCRHZnFVdmgHu2nFwlWCI3WGc3TSWhUFG","xTAUkGCbtgENBMJAEJsxgMLWzpEAACH5BAAKAAcALAAAAAAQABAAAAMyCLrc/jDKSatlQtScKdce","CAjDII7HcQ4EMTCpyrCuUBjCYRgHVtqlAiB1YhiCnlsRkAAAOwAAAAAAAAAAAA=="].join(""),u=function(){var t=document.createElement("div"),e=t.style;return e.width="100%",e.height="100%",e.background="url("+s+") no-repeat center center",t}(),c={automaticTitles:!0,autoHideTitle:!0,loadingElm:u,startAt:0};return e}(window.platform);PhotoViewer._SlideViewer=function(){function t(t,e,l){function f(){if(!s(t))throw new TypeError("SlideViewer first argument should be a DOM node which wraps the slider. Got "+t);if("function"!=typeof e)throw new TypeError("SlideViewer second argument should be a generator function!");l=l||{};for(var n in u)u.hasOwnProperty(n)&&void 0===l[n]&&(l[n]=u[n])}function d(){t.style.postition="relative",t.innerHTML="",g=document.createElement("div");var e=g.style;e.position="relative",e.top="0",e.height="100%",e.width="100%",e[r("transitionTimingFunction")]="ease-out",t.appendChild(g);for(var n=-1;2>n;n++){var i=document.createElement("div");e=i.style,e.position="absolute",e.top="0",e.height="100%",e.width="100%",e.left=100*n+"%",g.appendChild(i),w.push({elm:i})}S.attach(t,g),S.on("start",v),S.on("resize",y.refreshSize),M.on("destroy",function(){S.detach()}),y.refreshSize(),y.setPage(l.startAt)}function h(t,e){var n=t===A,i=r("transform");A=t,C?(g.style[i]="translateX("+t+"px) translateZ(0)",g.style.left=""):(g.style[i]="",g.style.left=t+"px"),e&&(n||!c?e():S.on("transitionEnd",e))}function p(t){g.style[r("transitionDuration")]=t+"ms"}function v(t){function e(t,e){var i=e.pageX-s;s=e.pageX,u=e.pageY;var r=Math.abs(s-o),c=Math.abs(u-a);if(!(!H&&r<l.bufferDist&&c<l.bufferDist)){if(H=!0,c>r&&!D&&l.allowScroll)return S.off("move"),S.off("end"),void S.on("start",v);D=!0;var f=A+i;(f>0||E>f)&&(f=A+i/2),t.preventDefault(),S.off("end").on("end",n),h(f),M.fire("move",f)}}function n(t){S.off("move"),S.off("end"),s=t.pageX;var e,n,i=s-o,a=Math.abs(i);return(A>0||E>A)&&(a*=.15),x>a?(n=Math.floor(300*a/x),p(n),e=-k*T,void h(e,r)):(k=i>0?Math.floor(-A/T):Math.ceil(-A/T),e=-k*T,n=Math.floor(200*Math.abs(A-e)/T),p(n),void h(e,r))}function i(){S.off("move"),S.off("end"),S.on("start",v)}function r(){S.off("transitionEnd"),y.setPage(k),S.on("start",v)}S.off("start"),S.on("end",i);var o=t.pageX,a=t.pageY,s=o,u=a;H=!1,D=!1,p(0),S.on("move",e)}function m(t){var n,i;try{n=e(t)}catch(r){return i=Error("Exception returned from source() function with input "+t+". Message: "+r.message),i.original=r,l.errorGenerator(i)}return!s(n)&&n.length&&(n=n[0]),s(n)?n:(i=new TypeError("Invalid type returned from source() function. Got type "+typeof n+" (with value "+n+"), expected HTMLElement. Input was "+t),l.errorGenerator(i))}var g,y=this,w=[],b=0,A=0,E=0,x=0,T=0,S=new n;f();var L=l.length,k=l.startAt,M=new i;y.on=M.on,y.off=M.off,y.refreshSize=function(){return T=t.clientWidth,E=(1-L)*T,x=Math.round(.15*T),p(0),h(-k*T),y},y.setLen=function(t){return L=t,y.refreshSize(),y},y.page=function(){return k};var P=-1;y.setPage=function(t){function e(t,e,n){var i=w,r=i[t].elm.style,o=i[e].elm.style,a=i[n].elm.style;r.left=100*(k-1)+"%",r.visibility=0===k?"hidden":"visible",o.left=100*k+"%",o.visibility="visible",a.left=100*(k+1)+"%",a.visibility=k===L-1?"hidden":"visible",i[t].newPage=k-1,i[e].newPage=k,i[n].newPage=k+1}if("number"!=typeof t)throw new TypeError("SlideViewer.setPage() requires a number! ('"+t+"' given)");k=a(t,0,L-1),p(0),h(-k*T),b=o(k+1,3),0===b?e(2,0,1):1==b?e(0,1,2):e(1,2,0);for(var n=0;3>n;n++){var i=w[n];i.newPage!=i.page&&(i.elm.innerHTML="",i.newPage>=0&&i.newPage<l.length&&i.elm.appendChild(m(i.newPage)),i.page=i.newPage)}return P!==t&&(M.fire("flip",t,w[b].elm),P=t),y},y.curMaster=function(){for(var t=0;3>t;t++)if(w[t].page==k)return w[t].elm;throw Error("No master is displaying our current page. This is a bug! Current page: "+t+", masters: "+JSON.serialize(w))},y.eachMaster=function(t){for(var e=0;3>e;e++)t(w[e].elm,w[e].page)},y.invalidate=function(){for(var t=0;3>t;t++)w[t].page=-1;return y.setPage(k),y},y.destroy=function(){return M.fire("destroy"),y},y.disable=function(){S.disableTouch()},y.enable=function(){S.enableTouch()},y.moving=function(){return D};var C=!0;y.disable3d=function(){C=!1,h(A)},y.enable3d=function(){C=!0,h(A)};var H=!1,D=!1;d()}function e(t){window.console&&console.error&&(t.original?(console.error(t.original),console.log(t.original.stack)):(console.error(t),console.log(t.stack)));var e=document.createElement("p");return e.innerHTML="There was an error creating this page! Contact the developer for more information.<br><br>"+t.message+"<br><br>If you are the developer, this means you made a mistake in your source() function. If you want to ensure users never see this page, you can override opts.errorGenerator to generate a more user-friendly error page.",e}function n(){function e(t,e){for(var n=0;n<t.length;n++)if(t[n].identifier==e)return t[n];return null}function n(n){var i=n.type;if(i==c)return void m.fire("resize",n);if(i==u)return void m.fire("transitionEnd",n);if(i!==f&&i!==d||!t.needsPreventDefaultHack||n.preventDefault(),v)return void(a&&i==f&&(r=n.changedTouches[0]));var o,s=r?r.identifier:"";if(i==f){if(a){if(r)return;r=n.changedTouches[0]}m.fire("start",a?n.changedTouches[0]:n)}else if(i==d){if(!a)return void m.fire("move",n,n);o=e(n.touches,s),r=o,m.fire("move",n,o)}else if(i==p||i==h){if(!a)return void m.fire("end",n);if(!r)return;o=e(n.changedTouches,s),o||(o=e(n.touches,s)),m.fire("end",o),r=null}}var r,o=this,a="ontouchstart"in window,s={"":"transitionend",webkit:"webkitTransitionEnd",Moz:"transitionend",O:"oTransitionEnd",ms:"MSTransitionEnd"},u=s[l],c="onorientationchange"in window?"orientationchange":"resize",f=a?"touchstart":"mousedown",d=a?"touchmove":"mousemove",h=a?"touchend":"mouseup",p=a?"touchcancel":"mouseout",v=!1,m=new i;o.on=m.on,o.off=m.off;var g,y;o.attach=function(t,e){return(g||y)&&o.detach(),g=t,y=e,window.addEventListener(c,n,!1),y.addEventListener(u,n,!1),g.addEventListener(f,n,!1),g.addEventListener(d,n,!1),g.addEventListener(h,n,!1),g.addEventListener(p,n,!1),o},o.detach=function(){return window.removeEventListener(c,n,!1),y.removeEventListener(u,n,!1),g.removeEventListener(f,n,!1),g.removeEventListener(d,n,!1),g.removeEventListener(h,n,!1),g.removeEventListener(p,n,!1),o},o.disableTouch=function(){r&&(m.fire("end",r),r=null),v=!0},o.enableTouch=function(){r&&m.fire("start",r),v=!1}}function i(){function t(t,e){for(var n=0;n<t.length;n++)t[n]===e&&t.splice(n,1)}var e=this,n={};e.callbacks=n,e.on=function(i,r){var o=n[i]||[];return t(o,r),o.push(r),n[i]=o,e},e.off=function(i,r){if(void 0===r)return delete n[i],e;var o=n[i];return o?(t(o,r),e):e},e.fire=function(t){var i=n[t];if(i){for(var r=Array.prototype.slice.call(arguments,1),o=0;o<i.length;o++)i[o].apply(null,r);return e}}}function r(t){return""===l?t:(t=t.charAt(0).toUpperCase()+t.substr(1),l+t)}function o(t,e){return(t%e+e)%e}function a(t,e,n){return Math.max(e,Math.min(n,t))}function s(t){return"object"==typeof HTMLElement?t instanceof HTMLElement:t&&"object"==typeof t&&1===t.nodeType&&"string"==typeof t.nodeName}var u={allowScroll:!0,length:10,startAt:0,bufferDist:10,errorGenerator:e};t.needsPreventDefaultHack=function(){var t=/\bAndroid (\d+(\.\d+)?)/.exec(navigator.userAgent);if(!t)return!1;var e=parseFloat(t[1]);return 4.1>e}();var c=!1,l=function(){for(var t=document.createElement("div").style,e="webkitT,MozT,msT,OT,t".split(","),n=0;n<e.length;n++){var i=e[n]+"ransform",r=e[n]+"ransition";if(r in t&&(c=!0),i in t)return e[n].substr(0,e[n].length-1)}return!1}();return t}(),!function(t){function e(t,e,n){if(t.addEventListener)t.addEventListener(e,n,!1);else if(t.attachEvent){var i=t.attachEvent("on"+e,n);v[i]={name:e,callback:n}}}function n(t,e,n){if(t.removeEventListener)t.removeEventListener(e,n,!1);else if(t.detachEvent)for(var i in v)v[i].name===e&&v[i].callback===n&&(t.detachEvent(i),delete v[i])}function i(t,e){function n(t){var e=Array.prototype.slice.call(arguments,1);return o[t]?o[t].apply(this,e):void 0}var i,r=t.prototype,o=e.prototype;for(var a in o)r[a]=o[a];r._super?(i=r._super,r._super=function(){i.call(this,arguments),n.call(this,arguments)}):r._super=n}function r(){this.onEvents={},this.onceEvents={}}function o(t){this._super("constructor"),this.id=t,this.lastPoint=null}function a(t){this._super("constructor"),this.fingers=t?h(t,function(t){return new o(t)}):[]}function s(t,e){return h(t,function(t){return{id:t.identifier,x:t.pageX,y:t.pageY,time:e}})}function u(t,e){return[{id:e,x:t.pageX,y:t.pageY,time:t.timeStamp}]}function c(t,e,n){"undefined"==typeof n&&(n=e,e=!1),"function"==typeof n&&(n={any:n});for(var i in m)if(i in n){var r=m[i](t,n[i]);"function"==typeof r&&(r={any:r});for(var o in r)n[o]=o in n?function(t,e){return function(){t.call(this,arguments),e.call(this,arguments)}}(n[o],r[o]):r[o]}this.running=!1,this.elem=t,this.handleMouse=!!e,this.settings=n||{},this.mainHand=new a,this.multiHand=null,this.mouseID=null,this.start()}function l(t,e,n){return new c(t,e,n)}t=t||{};var f=function(){return Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var i=0,r=t.length;r>i;i++)i in t&&e.call(n,t[i],i,t)}}(),d=function(){return Array.prototype.indexOf?function(t,e,n){return Array.prototype.indexOf.call(t,e,n)}:function(t,e,n){for(var i=n||0,r=t.length;r>i;i++)if(i in t&&t[i]===e)return i;return-1}}(),h=function(){return Array.prototype.map?function(t,e,n){return Array.prototype.map.call(t,e,n)}:function(t,e,n){for(var i=t.length,r=new Array(i),o=0;i>o;o++)o in t&&(r[o]=e.call(n,t[o],o,t));return r}}(),p=function(){return Array.prototype.filter?function(t,e,n){return Array.prototype.filter.call(t,e,n)}:function(t,e,n){for(var i,r=[],o=0,a=t.length;a>o;o++)i=t[o],o in t&&e.call(n,i,o,t)&&r.push(i);return r}}(),v={};r.prototype.on=function(t,e){if(e){if(t in this.onEvents){var n=d(this.onEvents[t],e);if(-1!=n)return}else this.onEvents[t]=[];if(t in this.onceEvents){var n=d(this.onceEvents[t],e);-1!=n&&this.onceEvents.splice(n,1)}this.onEvents[t].push(e)}},r.prototype.once=function(t,e){if(e){if(t in this.onceEvents){var n=d(this.onceEvents[t],e);if(-1!=n)return}else this.onceEvents[t]=[];if(t in this.onEvents){var n=d(this.onEvents[t],e);-1!=n&&this.onEvents.splice(n,1)}this.onceEvents[t].push(e)}},r.prototype.off=function(t,e){if(e){if(t in this.onEvents){var n=d(this.onEvents[t],e);if(-1!=n)return void this.onEvents.splice(n,1)}if(t in this.onceEvents){var n=d(this.onceEvents[t],e);if(-1!=n)return void this.onceEvents.splice(n,1)}}},r.prototype.trigger=function(t){for(var e,n=Array.prototype.slice.call(arguments,1),i=(this.onEvents[t]||[]).concat(this.onceEvents[t]||[]);e=i.shift();)e.apply(this,n)},i(o,r),i(a,r),a.prototype.get=function(t){var e;return f(this.fingers,function(n){n.id==t&&(e=n)}),e},c.prototype.start=function(){this.running||(this.running=!0,e(this.elem,"touchstart",this.touchstart()),e(this.elem,"touchmove",this.touchmove()),e(this.elem,"touchcancel",this.touchend()),e(this.elem,"touchend",this.touchend()),this.handleMouse&&(e(this.elem,"mousedown",this.mousedown()),e(this.elem,"mouseup",this.mouseup()),e(this.elem,"mouseout",this.mouseup()),e(this.elem,"mousemove",this.mousemove())))},c.prototype.stop=function(){this.running&&(this.running=!1,n(this.elem,"touchstart",this.touchstart()),n(this.elem,"touchmove",this.touchmove()),n(this.elem,"touchend",this.touchend()),n(this.elem,"touchcancel",this.touchend()),n(this.elem,"mousedown",this.mousedown()),n(this.elem,"mouseup",this.mouseup()),n(this.elem,"mouseout",this.mouseup()),n(this.elem,"mousemove",this.mousemove()))},c.prototype.touchstart=function(){if(!this._touchstart){var t=this;this._touchstart=function(e){var n=s(e.touches,e.timeStamp),i=s(e.changedTouches,e.timeStamp);t.mainHandStart(i),t.multiHandStart(i,n),e.preventDefault()}}return this._touchstart},c.prototype.touchmove=function(){if(!this._touchmove){var t=this;this._touchmove=function(e){var n=s(e.touches,e.timeStamp),i=s(e.changedTouches,e.timeStamp);t.mainHandMove(i),t.multiHandMove(i,n),e.preventDefault()}}return this._touchmove},c.prototype.touchend=function(){if(!this._touchend){var t=this;this._touchend=function(e){var n=s(e.touches,e.timeStamp),i=s(e.changedTouches,e.timeStamp);t.mainHandEnd(i),t.multiHandEnd(i,n),e.preventDefault()}}return this._touchend},c.prototype.mousedown=function(){if(!this._mousedown){var t=this;this._mousedown=function(e){var n;t.mouseID&&(n=u(e,t.mouseID),t.mainHandEnd(n),t.multiHandEnd(n,n),t.mouseID=null),t.mouseID=Math.random()+"",n=u(e,t.mouseID),t.mainHandStart(n),t.multiHandStart(n,n)}}return this._mousedown},c.prototype.mouseup=function(){if(!this._mouseup){var t=this;this._mouseup=function(e){if("mouseout"===e.type)for(var n=e.relatedTarget||e.toElement;n;){if(n===t.elem)return;n=n.parentNode}var i;t.mouseID&&(i=u(e,t.mouseID),t.mainHandEnd(i),t.multiHandEnd(i,i),t.mouseID=null)}}return this._mouseup},c.prototype.mousemove=function(){if(!this._mousemove){var t=this;this._mousemove=function(e){var n;t.mouseID&&(n=u(e,t.mouseID),t.mainHandMove(n),t.multiHandMove(n,n))}}return this._mousemove},c.prototype.mainHandStart=function(t){var e=this,n=[];f(t,function(t){var i=new o(t.id);i.lastPoint=t,n.push([i,t]),e.mainHand.fingers.push(i)}),f(n,function(t){e.settings.any&&e.settings.any.call(e,e.mainHand,t[0]),t[0].trigger("start",t[1])}),e.mainHand.trigger("start",t)},c.prototype.mainHandMove=function(t){var e=this,n=[];f(t,function(t){var i=e.mainHand.get(t.id);i&&(i.lastPoint=t,n.push([i,t]))}),f(n,function(t){t[0].trigger("move",t[1])}),e.mainHand.trigger("move",t)},c.prototype.mainHandEnd=function(t){var e=this,n=[];f(t,function(t){var i,r=e.mainHand.get(t.id);r&&(r.lastPoint=t,n.push([r,t]),i=d(e.mainHand.fingers,r),e.mainHand.fingers.splice(i,1))}),f(n,function(t){t[0].trigger("end",t[1])}),e.mainHand.trigger("end",t)},c.prototype.multiHandStart=function(t,e){this.multiHandDestroy(),this.multiHandRestart(e)},c.prototype.multiHandMove=function(t){var e=this,n=[];f(t,function(t){var i=e.multiHand.get(t.id);i&&(i.lastPoint=t,n.push([i,t]))}),f(n,function(t){t[0].trigger("move",t[1])}),e.multiHand.trigger("move",t)},c.prototype.multiHandEnd=function(t,e){this.multiHandDestroy();var n=p(e,function(e){var n=!0;return f(t,function(t){t.id==e.id&&(n=!1)}),n});this.multiHandRestart(n)},c.prototype.multiHandRestart=function(t){var e=this;if(0!=t.length){e.multiHand=new a;var n=[];f(t,function(t){var i=new o(t.id);i.lastPoint=t,n.push([i,t]),e.multiHand.fingers.push(i)});var i=e.settings[{1:"one",2:"two",3:"three",4:"four",5:"five"}[e.multiHand.fingers.length]];i&&i.apply(e,[e.multiHand].concat(e.multiHand.fingers)),f(n,function(t){t[0].trigger("start",t[1])}),e.multiHand.trigger("start",t)}},c.prototype.multiHandDestroy=function(){if(this.multiHand){var t=[];f(this.multiHand.fingers,function(e){var n=e.lastPoint;t.push(n),e.trigger("end",n)}),this.multiHand.trigger("end",t),this.multiHand=null}};var m={};l.plugin=function(t,e){if(t in m)throw"Touchy: "+t+" plugin already defined";m[t]=e};var g=function(t){t.preventDefault()};l.stopWindowBounce=function(){e(t,"touchmove",g)},l.startWindowBounce=function(){n(t,"touchmove",g)},PhotoViewer._Touchy=l}(window),PhotoViewer._Zoomable=function(t,e,n){function i(t,e){var i=e.lastPoint.x,r=e.lastPoint.y,o=l();Math.abs(p)>=o&&n.enable(),d(),e.on("move",function(t){if(y=0,!(1>=m)){var e=(t.x-i)/m,o=(t.y-r)/m;p+=e,v+=o,i=t.x,r=t.y;var a=l();if(Math.abs(p)<=a)n.disable();else if(n.moving())return;s(0)}}),e.on("end",function(){if(n.moving())return d(),void s(300);var t=Date.now(),i=t-y;if(i>200)return y=t,d(),void s(500);if(1>=m){m=2;var r=h(e.lastPoint);p=r.x,v=r.y,d(),s(500)}else m=1,p=0,v=0,s(500);y=0})}function r(t,e,i){if(y=0,!n.moving()){n.disable();var r=e.lastPoint,u=i.lastPoint,c=o(r,u),l=h(a(r,u));t.on("move",function(){var t=e.lastPoint,n=i.lastPoint,r=o(t,n);m*=r/c,c=r;var u=h(a(t,n));p+=l.x-u.x,v+=l.y-u.y,s(0)}),t.on("end",function(){var t=1,e=4;1>=m&&n.enable(),t>m&&(m=t,p=0,v=0),m>e&&(m=e),d(),s(300)})}}function o(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function a(t,e){return{x:(t.x+e.x)/2,y:(t.y+e.y)/2}}function s(t){var n=function(t,e){var n=Math.pow(10,e);return Math.round(t*n)/n},i=n(p*m,2),r=n(v*m,2),o=n(m,2),a="translateX("+i+"px) translateY("+r+"px) scale("+o+","+o+")",s=0===t?"none":"all",u=n(t,0)+"ms",c=e.style;c.webkitTransitionProperty=s,c.webkitTransitionDuration=u,c.webkitTransform=a}function u(){return t.offsetWidth/2}function c(){return t.offsetHeight/2}function l(){var t=e.offsetWidth/2-u()/m;return 0>t?0:t}function f(){var t=e.offsetHeight/2-c()/m;return 0>t?0:t}function d(){var t=l();Math.abs(p)>t&&(p=p>0?t:-t);var e=f();Math.abs(v)>e&&(v=v>0?e:-e)}function h(t){return{x:p+(u()-t.x)/m,y:v+(c()-t.y)/m}}if(void 0===t)throw new TypeError("Zoomable requires a viewport element as it's first argument!");if(void 0===e)throw new TypeError("Zoomable requires a element to zoom as it's second argument!");void 0===n&&(n={enable:function(){},disable:function(){},moving:function(){return!1}});var p,v,m,g=this,y=0;g.reset=function(){return p=0,v=0,m=1,y=0,s(0),g},g.destroy=function(){return w.stop(),g};var w=PhotoViewer._Touchy(t,{one:i,two:r});g.reset()},PhotoViewer._Zoomable.deviceSupported=function(){var t=/\bAndroid (\d+(\.\d+)?)/.exec(navigator.userAgent);if(!t)return!0;var e=parseFloat(t[1]);return e>3}(),window.photoViewer=null,window.addEventListener("orientationchange",viewerOnResize,!1),window.addEventListener("resize",viewerOnResize,!1),$(window).on("load",loadedPage),window.addEventListener("push",loadedPage);