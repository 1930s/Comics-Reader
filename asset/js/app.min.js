function toRetina(e){return e.replace(/\.\w+$/,function(e){return"@2x"+e})}function viewerLoad(e,t){var n=document.querySelectorAll(".pswp")[0],i={index:t};window.gallery=new PhotoSwipe(n,PhotoSwipeUI_Default,e,i),window.gallery.init()}function loadedPage(){var e=$("#content > .content");if(e.find("img.lazy").unveil(100),e.hasClass("gallery-page")){var t=[],n=0,i=e.find("ol.gallery li");i.on(window.touchdevice?"tap":"click",function(){viewerLoad(t,$(this).data("index"))}),i.each(function(){var e=$(this),i=window.isRetina?toRetina(e.data("img")):e.data("img");e.data("index",n),t[n]={src:i,w:e.data("width"),h:e.data("height")},n++})}}var Zepto=function(){function e(e){return null==e?String(e):K[W.call(e)]||"object"}function t(t){return"function"==e(t)}function n(e){return null!=e&&e==e.window}function i(e){return null!=e&&e.nodeType==e.DOCUMENT_NODE}function o(t){return"object"==e(t)}function r(e){return o(e)&&!n(e)&&Object.getPrototypeOf(e)==Object.prototype}function a(e){return"number"==typeof e.length}function s(e){return O.call(e,function(e){return null!=e})}function l(e){return e.length>0?E.fn.concat.apply([],e):e}function u(e){return e.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()}function c(e){return e in L?L[e]:L[e]=new RegExp("(^|\\s)"+e+"(\\s|$)")}function d(e,t){return"number"!=typeof t||A[u(e)]?t:t+"px"}function f(e){var t,n;return _[e]||(t=M.createElement(e),M.body.appendChild(t),n=getComputedStyle(t,"").getPropertyValue("display"),t.parentNode.removeChild(t),"none"==n&&(n="block"),_[e]=n),_[e]}function p(e){return"children"in e?k.call(e.children):E.map(e.childNodes,function(e){return 1==e.nodeType?e:void 0})}function h(e,t,n){for(T in t)n&&(r(t[T])||X(t[T]))?(r(t[T])&&!r(e[T])&&(e[T]={}),X(t[T])&&!X(e[T])&&(e[T]=[]),h(e[T],t[T],n)):t[T]!==b&&(e[T]=t[T])}function m(e,t){return null==t?E(e):E(e).filter(t)}function v(e,n,i,o){return t(n)?n.call(e,i,o):n}function g(e,t,n){null==n?e.removeAttribute(t):e.setAttribute(t,n)}function y(e,t){var n=e.className,i=n&&n.baseVal!==b;return t===b?i?n.baseVal:n:void(i?n.baseVal=t:e.className=t)}function w(e){var t;try{return e?"true"==e||("false"==e?!1:"null"==e?null:/^0/.test(e)||isNaN(t=Number(e))?/^[\[\{]/.test(e)?E.parseJSON(e):e:t):e}catch(n){return e}}function x(e,t){t(e);for(var n=0,i=e.childNodes.length;i>n;n++)x(e.childNodes[n],t)}var b,T,E,C,S,I,D=[],k=D.slice,O=D.filter,M=window.document,_={},L={},A={"column-count":1,columns:1,"font-weight":1,"line-height":1,opacity:1,"z-index":1,zoom:1},P=/^\s*<(\w+|!)[^>]*>/,N=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,F=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,R=/^(?:body|html)$/i,Z=/([A-Z])/g,z=["val","css","html","text","data","width","height","offset"],j=["after","prepend","before","append"],U=M.createElement("table"),H=M.createElement("tr"),q={tr:M.createElement("tbody"),tbody:U,thead:U,tfoot:U,td:H,th:H,"*":M.createElement("div")},B=/complete|loaded|interactive/,$=/^[\w-]*$/,K={},W=K.toString,G={},V=M.createElement("div"),Y={tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},X=Array.isArray||function(e){return e instanceof Array};return G.matches=function(e,t){if(!t||!e||1!==e.nodeType)return!1;var n=e.webkitMatchesSelector||e.mozMatchesSelector||e.oMatchesSelector||e.matchesSelector;if(n)return n.call(e,t);var i,o=e.parentNode,r=!o;return r&&(o=V).appendChild(e),i=~G.qsa(o,t).indexOf(e),r&&V.removeChild(e),i},S=function(e){return e.replace(/-+(.)?/g,function(e,t){return t?t.toUpperCase():""})},I=function(e){return O.call(e,function(t,n){return e.indexOf(t)==n})},G.fragment=function(e,t,n){var i,o,a;return N.test(e)&&(i=E(M.createElement(RegExp.$1))),i||(e.replace&&(e=e.replace(F,"<$1></$2>")),t===b&&(t=P.test(e)&&RegExp.$1),t in q||(t="*"),a=q[t],a.innerHTML=""+e,i=E.each(k.call(a.childNodes),function(){a.removeChild(this)})),r(n)&&(o=E(i),E.each(n,function(e,t){z.indexOf(e)>-1?o[e](t):o.attr(e,t)})),i},G.Z=function(e,t){return e=e||[],e.__proto__=E.fn,e.selector=t||"",e},G.isZ=function(e){return e instanceof G.Z},G.init=function(e,n){var i;if(!e)return G.Z();if("string"==typeof e)if(e=e.trim(),"<"==e[0]&&P.test(e))i=G.fragment(e,RegExp.$1,n),e=null;else{if(n!==b)return E(n).find(e);i=G.qsa(M,e)}else{if(t(e))return E(M).ready(e);if(G.isZ(e))return e;if(X(e))i=s(e);else if(o(e))i=[e],e=null;else if(P.test(e))i=G.fragment(e.trim(),RegExp.$1,n),e=null;else{if(n!==b)return E(n).find(e);i=G.qsa(M,e)}}return G.Z(i,e)},E=function(e,t){return G.init(e,t)},E.extend=function(e){var t,n=k.call(arguments,1);return"boolean"==typeof e&&(t=e,e=n.shift()),n.forEach(function(n){h(e,n,t)}),e},G.qsa=function(e,t){var n,o="#"==t[0],r=!o&&"."==t[0],a=o||r?t.slice(1):t,s=$.test(a);return i(e)&&s&&o?(n=e.getElementById(a))?[n]:[]:1!==e.nodeType&&9!==e.nodeType?[]:k.call(s&&!o?r?e.getElementsByClassName(a):e.getElementsByTagName(t):e.querySelectorAll(t))},E.contains=M.documentElement.contains?function(e,t){return e!==t&&e.contains(t)}:function(e,t){for(;t&&(t=t.parentNode);)if(t===e)return!0;return!1},E.type=e,E.isFunction=t,E.isWindow=n,E.isArray=X,E.isPlainObject=r,E.isEmptyObject=function(e){var t;for(t in e)return!1;return!0},E.inArray=function(e,t,n){return D.indexOf.call(t,e,n)},E.camelCase=S,E.trim=function(e){return null==e?"":String.prototype.trim.call(e)},E.uuid=0,E.support={},E.expr={},E.map=function(e,t){var n,i,o,r=[];if(a(e))for(i=0;i<e.length;i++)n=t(e[i],i),null!=n&&r.push(n);else for(o in e)n=t(e[o],o),null!=n&&r.push(n);return l(r)},E.each=function(e,t){var n,i;if(a(e)){for(n=0;n<e.length;n++)if(t.call(e[n],n,e[n])===!1)return e}else for(i in e)if(t.call(e[i],i,e[i])===!1)return e;return e},E.grep=function(e,t){return O.call(e,t)},window.JSON&&(E.parseJSON=JSON.parse),E.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){K["[object "+t+"]"]=t.toLowerCase()}),E.fn={forEach:D.forEach,reduce:D.reduce,push:D.push,sort:D.sort,indexOf:D.indexOf,concat:D.concat,map:function(e){return E(E.map(this,function(t,n){return e.call(t,n,t)}))},slice:function(){return E(k.apply(this,arguments))},ready:function(e){return B.test(M.readyState)&&M.body?e(E):M.addEventListener("DOMContentLoaded",function(){e(E)},!1),this},get:function(e){return e===b?k.call(this):this[e>=0?e:e+this.length]},toArray:function(){return this.get()},size:function(){return this.length},remove:function(){return this.each(function(){null!=this.parentNode&&this.parentNode.removeChild(this)})},each:function(e){return D.every.call(this,function(t,n){return e.call(t,n,t)!==!1}),this},filter:function(e){return t(e)?this.not(this.not(e)):E(O.call(this,function(t){return G.matches(t,e)}))},add:function(e,t){return E(I(this.concat(E(e,t))))},is:function(e){return this.length>0&&G.matches(this[0],e)},not:function(e){var n=[];if(t(e)&&e.call!==b)this.each(function(t){e.call(this,t)||n.push(this)});else{var i="string"==typeof e?this.filter(e):a(e)&&t(e.item)?k.call(e):E(e);this.forEach(function(e){i.indexOf(e)<0&&n.push(e)})}return E(n)},has:function(e){return this.filter(function(){return o(e)?E.contains(this,e):E(this).find(e).size()})},eq:function(e){return-1===e?this.slice(e):this.slice(e,+e+1)},first:function(){var e=this[0];return e&&!o(e)?e:E(e)},last:function(){var e=this[this.length-1];return e&&!o(e)?e:E(e)},find:function(e){var t,n=this;return t=e?"object"==typeof e?E(e).filter(function(){var e=this;return D.some.call(n,function(t){return E.contains(t,e)})}):1==this.length?E(G.qsa(this[0],e)):this.map(function(){return G.qsa(this,e)}):[]},closest:function(e,t){var n=this[0],o=!1;for("object"==typeof e&&(o=E(e));n&&!(o?o.indexOf(n)>=0:G.matches(n,e));)n=n!==t&&!i(n)&&n.parentNode;return E(n)},parents:function(e){for(var t=[],n=this;n.length>0;)n=E.map(n,function(e){return(e=e.parentNode)&&!i(e)&&t.indexOf(e)<0?(t.push(e),e):void 0});return m(t,e)},parent:function(e){return m(I(this.pluck("parentNode")),e)},children:function(e){return m(this.map(function(){return p(this)}),e)},contents:function(){return this.map(function(){return k.call(this.childNodes)})},siblings:function(e){return m(this.map(function(e,t){return O.call(p(t.parentNode),function(e){return e!==t})}),e)},empty:function(){return this.each(function(){this.innerHTML=""})},pluck:function(e){return E.map(this,function(t){return t[e]})},show:function(){return this.each(function(){"none"==this.style.display&&(this.style.display=""),"none"==getComputedStyle(this,"").getPropertyValue("display")&&(this.style.display=f(this.nodeName))})},replaceWith:function(e){return this.before(e).remove()},wrap:function(e){var n=t(e);if(this[0]&&!n)var i=E(e).get(0),o=i.parentNode||this.length>1;return this.each(function(t){E(this).wrapAll(n?e.call(this,t):o?i.cloneNode(!0):i)})},wrapAll:function(e){if(this[0]){E(this[0]).before(e=E(e));for(var t;(t=e.children()).length;)e=t.first();E(e).append(this)}return this},wrapInner:function(e){var n=t(e);return this.each(function(t){var i=E(this),o=i.contents(),r=n?e.call(this,t):e;o.length?o.wrapAll(r):i.append(r)})},unwrap:function(){return this.parent().each(function(){E(this).replaceWith(E(this).children())}),this},clone:function(){return this.map(function(){return this.cloneNode(!0)})},hide:function(){return this.css("display","none")},toggle:function(e){return this.each(function(){var t=E(this);(e===b?"none"==t.css("display"):e)?t.show():t.hide()})},prev:function(e){return E(this.pluck("previousElementSibling")).filter(e||"*")},next:function(e){return E(this.pluck("nextElementSibling")).filter(e||"*")},html:function(e){return 0 in arguments?this.each(function(t){var n=this.innerHTML;E(this).empty().append(v(this,e,t,n))}):0 in this?this[0].innerHTML:null},text:function(e){return 0 in arguments?this.each(function(t){var n=v(this,e,t,this.textContent);this.textContent=null==n?"":""+n}):0 in this?this[0].textContent:null},attr:function(e,t){var n;return"string"!=typeof e||1 in arguments?this.each(function(n){if(1===this.nodeType)if(o(e))for(T in e)g(this,T,e[T]);else g(this,e,v(this,t,n,this.getAttribute(e)))}):this.length&&1===this[0].nodeType?!(n=this[0].getAttribute(e))&&e in this[0]?this[0][e]:n:b},removeAttr:function(e){return this.each(function(){1===this.nodeType&&g(this,e)})},prop:function(e,t){return e=Y[e]||e,1 in arguments?this.each(function(n){this[e]=v(this,t,n,this[e])}):this[0]&&this[0][e]},data:function(e,t){var n="data-"+e.replace(Z,"-$1").toLowerCase(),i=1 in arguments?this.attr(n,t):this.attr(n);return null!==i?w(i):b},val:function(e){return 0 in arguments?this.each(function(t){this.value=v(this,e,t,this.value)}):this[0]&&(this[0].multiple?E(this[0]).find("option").filter(function(){return this.selected}).pluck("value"):this[0].value)},offset:function(e){if(e)return this.each(function(t){var n=E(this),i=v(this,e,t,n.offset()),o=n.offsetParent().offset(),r={top:i.top-o.top,left:i.left-o.left};"static"==n.css("position")&&(r.position="relative"),n.css(r)});if(!this.length)return null;var t=this[0].getBoundingClientRect();return{left:t.left+window.pageXOffset,top:t.top+window.pageYOffset,width:Math.round(t.width),height:Math.round(t.height)}},css:function(t,n){if(arguments.length<2){var i=this[0],o=getComputedStyle(i,"");if(!i)return;if("string"==typeof t)return i.style[S(t)]||o.getPropertyValue(t);if(X(t)){var r={};return E.each(X(t)?t:[t],function(e,t){r[t]=i.style[S(t)]||o.getPropertyValue(t)}),r}}var a="";if("string"==e(t))n||0===n?a=u(t)+":"+d(t,n):this.each(function(){this.style.removeProperty(u(t))});else for(T in t)t[T]||0===t[T]?a+=u(T)+":"+d(T,t[T])+";":this.each(function(){this.style.removeProperty(u(T))});return this.each(function(){this.style.cssText+=";"+a})},index:function(e){return e?this.indexOf(E(e)[0]):this.parent().children().indexOf(this[0])},hasClass:function(e){return e?D.some.call(this,function(e){return this.test(y(e))},c(e)):!1},addClass:function(e){return e?this.each(function(t){C=[];var n=y(this),i=v(this,e,t,n);i.split(/\s+/g).forEach(function(e){E(this).hasClass(e)||C.push(e)},this),C.length&&y(this,n+(n?" ":"")+C.join(" "))}):this},removeClass:function(e){return this.each(function(t){return e===b?y(this,""):(C=y(this),v(this,e,t,C).split(/\s+/g).forEach(function(e){C=C.replace(c(e)," ")}),void y(this,C.trim()))})},toggleClass:function(e,t){return e?this.each(function(n){var i=E(this),o=v(this,e,n,y(this));o.split(/\s+/g).forEach(function(e){(t===b?!i.hasClass(e):t)?i.addClass(e):i.removeClass(e)})}):this},scrollTop:function(e){if(this.length){var t="scrollTop"in this[0];return e===b?t?this[0].scrollTop:this[0].pageYOffset:this.each(t?function(){this.scrollTop=e}:function(){this.scrollTo(this.scrollX,e)})}},scrollLeft:function(e){if(this.length){var t="scrollLeft"in this[0];return e===b?t?this[0].scrollLeft:this[0].pageXOffset:this.each(t?function(){this.scrollLeft=e}:function(){this.scrollTo(e,this.scrollY)})}},position:function(){if(this.length){var e=this[0],t=this.offsetParent(),n=this.offset(),i=R.test(t[0].nodeName)?{top:0,left:0}:t.offset();return n.top-=parseFloat(E(e).css("margin-top"))||0,n.left-=parseFloat(E(e).css("margin-left"))||0,i.top+=parseFloat(E(t[0]).css("border-top-width"))||0,i.left+=parseFloat(E(t[0]).css("border-left-width"))||0,{top:n.top-i.top,left:n.left-i.left}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent||M.body;e&&!R.test(e.nodeName)&&"static"==E(e).css("position");)e=e.offsetParent;return e})}},E.fn.detach=E.fn.remove,["width","height"].forEach(function(e){var t=e.replace(/./,function(e){return e[0].toUpperCase()});E.fn[e]=function(o){var r,a=this[0];return o===b?n(a)?a["inner"+t]:i(a)?a.documentElement["scroll"+t]:(r=this.offset())&&r[e]:this.each(function(t){a=E(this),a.css(e,v(this,o,t,a[e]()))})}}),j.forEach(function(t,n){var i=n%2;E.fn[t]=function(){var t,o,r=E.map(arguments,function(n){return t=e(n),"object"==t||"array"==t||null==n?n:G.fragment(n)}),a=this.length>1;return r.length<1?this:this.each(function(e,t){o=i?t:t.parentNode,t=0==n?t.nextSibling:1==n?t.firstChild:2==n?t:null;var s=E.contains(M.documentElement,o);r.forEach(function(e){if(a)e=e.cloneNode(!0);else if(!o)return E(e).remove();o.insertBefore(e,t),s&&x(e,function(e){null==e.nodeName||"SCRIPT"!==e.nodeName.toUpperCase()||e.type&&"text/javascript"!==e.type||e.src||window.eval.call(window,e.innerHTML)})})})},E.fn[i?t+"To":"insert"+(n?"Before":"After")]=function(e){return E(e)[t](this),this}}),G.Z.prototype=E.fn,G.uniq=I,G.deserializeValue=w,E.zepto=G,E}();window.Zepto=Zepto,void 0===window.$&&(window.$=Zepto),function(e){function t(e){return e._zid||(e._zid=f++)}function n(e,n,r,a){if(n=i(n),n.ns)var s=o(n.ns);return(v[t(e)]||[]).filter(function(e){return!(!e||n.e&&e.e!=n.e||n.ns&&!s.test(e.ns)||r&&t(e.fn)!==t(r)||a&&e.sel!=a)})}function i(e){var t=(""+e).split(".");return{e:t[0],ns:t.slice(1).sort().join(" ")}}function o(e){return new RegExp("(?:^| )"+e.replace(" "," .* ?")+"(?: |$)")}function r(e,t){return e.del&&!y&&e.e in w||!!t}function a(e){return x[e]||y&&w[e]||e}function s(n,o,s,l,c,f,p){var h=t(n),m=v[h]||(v[h]=[]);o.split(/\s/).forEach(function(t){if("ready"==t)return e(document).ready(s);var o=i(t);o.fn=s,o.sel=c,o.e in x&&(s=function(t){var n=t.relatedTarget;return!n||n!==this&&!e.contains(this,n)?o.fn.apply(this,arguments):void 0}),o.del=f;var h=f||s;o.proxy=function(e){if(e=u(e),!e.isImmediatePropagationStopped()){e.data=l;var t=h.apply(n,e._args==d?[e]:[e].concat(e._args));return t===!1&&(e.preventDefault(),e.stopPropagation()),t}},o.i=m.length,m.push(o),"addEventListener"in n&&n.addEventListener(a(o.e),o.proxy,r(o,p))})}function l(e,i,o,s,l){var u=t(e);(i||"").split(/\s/).forEach(function(t){n(e,t,o,s).forEach(function(t){delete v[u][t.i],"removeEventListener"in e&&e.removeEventListener(a(t.e),t.proxy,r(t,l))})})}function u(t,n){return(n||!t.isDefaultPrevented)&&(n||(n=t),e.each(C,function(e,i){var o=n[e];t[e]=function(){return this[i]=b,o&&o.apply(n,arguments)},t[i]=T}),(n.defaultPrevented!==d?n.defaultPrevented:"returnValue"in n?n.returnValue===!1:n.getPreventDefault&&n.getPreventDefault())&&(t.isDefaultPrevented=b)),t}function c(e){var t,n={originalEvent:e};for(t in e)E.test(t)||e[t]===d||(n[t]=e[t]);return u(n,e)}var d,f=1,p=Array.prototype.slice,h=e.isFunction,m=function(e){return"string"==typeof e},v={},g={},y="onfocusin"in window,w={focus:"focusin",blur:"focusout"},x={mouseenter:"mouseover",mouseleave:"mouseout"};g.click=g.mousedown=g.mouseup=g.mousemove="MouseEvents",e.event={add:s,remove:l},e.proxy=function(n,i){var o=2 in arguments&&p.call(arguments,2);if(h(n)){var r=function(){return n.apply(i,o?o.concat(p.call(arguments)):arguments)};return r._zid=t(n),r}if(m(i))return o?(o.unshift(n[i],n),e.proxy.apply(null,o)):e.proxy(n[i],n);throw new TypeError("expected function")},e.fn.bind=function(e,t,n){return this.on(e,t,n)},e.fn.unbind=function(e,t){return this.off(e,t)},e.fn.one=function(e,t,n,i){return this.on(e,t,n,i,1)};var b=function(){return!0},T=function(){return!1},E=/^([A-Z]|returnValue$|layer[XY]$)/,C={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"};e.fn.delegate=function(e,t,n){return this.on(t,e,n)},e.fn.undelegate=function(e,t,n){return this.off(t,e,n)},e.fn.live=function(t,n){return e(document.body).delegate(this.selector,t,n),this},e.fn.die=function(t,n){return e(document.body).undelegate(this.selector,t,n),this},e.fn.on=function(t,n,i,o,r){var a,u,f=this;return t&&!m(t)?(e.each(t,function(e,t){f.on(e,n,i,t,r)}),f):(m(n)||h(o)||o===!1||(o=i,i=n,n=d),(h(i)||i===!1)&&(o=i,i=d),o===!1&&(o=T),f.each(function(d,f){r&&(a=function(e){return l(f,e.type,o),o.apply(this,arguments)}),n&&(u=function(t){var i,r=e(t.target).closest(n,f).get(0);return r&&r!==f?(i=e.extend(c(t),{currentTarget:r,liveFired:f}),(a||o).apply(r,[i].concat(p.call(arguments,1)))):void 0}),s(f,t,o,i,n,u||a)}))},e.fn.off=function(t,n,i){var o=this;return t&&!m(t)?(e.each(t,function(e,t){o.off(e,n,t)}),o):(m(n)||h(i)||i===!1||(i=n,n=d),i===!1&&(i=T),o.each(function(){l(this,t,i,n)}))},e.fn.trigger=function(t,n){return t=m(t)||e.isPlainObject(t)?e.Event(t):u(t),t._args=n,this.each(function(){"dispatchEvent"in this?this.dispatchEvent(t):e(this).triggerHandler(t,n)})},e.fn.triggerHandler=function(t,i){var o,r;return this.each(function(a,s){o=c(m(t)?e.Event(t):t),o._args=i,o.target=s,e.each(n(s,t.type||t),function(e,t){return r=t.proxy(o),o.isImmediatePropagationStopped()?!1:void 0})}),r},"focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select keydown keypress keyup error".split(" ").forEach(function(t){e.fn[t]=function(e){return e?this.bind(t,e):this.trigger(t)}}),["focus","blur"].forEach(function(t){e.fn[t]=function(e){return e?this.bind(t,e):this.each(function(){try{this[t]()}catch(e){}}),this}}),e.Event=function(e,t){m(e)||(t=e,e=t.type);var n=document.createEvent(g[e]||"Events"),i=!0;if(t)for(var o in t)"bubbles"==o?i=!!t[o]:n[o]=t[o];return n.initEvent(e,i,!0),u(n)}}(Zepto),function(e){function t(t,n,i){var o=e.Event(n);return e(t).trigger(o,i),!o.isDefaultPrevented()}function n(e,n,i,o){return e.global?t(n||y,i,o):void 0}function i(t){t.global&&0===e.active++&&n(t,null,"ajaxStart")}function o(t){t.global&&!--e.active&&n(t,null,"ajaxStop")}function r(e,t){var i=t.context;return t.beforeSend.call(i,e,t)===!1||n(t,i,"ajaxBeforeSend",[e,t])===!1?!1:void n(t,i,"ajaxSend",[e,t])}function a(e,t,i,o){var r=i.context,a="success";i.success.call(r,e,a,t),o&&o.resolveWith(r,[e,a,t]),n(i,r,"ajaxSuccess",[t,i,e]),l(a,t,i)}function s(e,t,i,o,r){var a=o.context;o.error.call(a,i,t,e),r&&r.rejectWith(a,[i,t,e]),n(o,a,"ajaxError",[i,o,e||t]),l(t,i,o)}function l(e,t,i){var r=i.context;i.complete.call(r,t,e),n(i,r,"ajaxComplete",[t,i]),o(i)}function u(){}function c(e){return e&&(e=e.split(";",2)[0]),e&&(e==E?"html":e==T?"json":x.test(e)?"script":b.test(e)&&"xml")||"text"}function d(e,t){return""==t?e:(e+"&"+t).replace(/[&?]{1,2}/,"?")}function f(t){t.processData&&t.data&&"string"!=e.type(t.data)&&(t.data=e.param(t.data,t.traditional)),!t.data||t.type&&"GET"!=t.type.toUpperCase()||(t.url=d(t.url,t.data),t.data=void 0)}function p(t,n,i,o){return e.isFunction(n)&&(o=i,i=n,n=void 0),e.isFunction(i)||(o=i,i=void 0),{url:t,data:n,success:i,dataType:o}}function h(t,n,i,o){var r,a=e.isArray(n),s=e.isPlainObject(n);e.each(n,function(n,l){r=e.type(l),o&&(n=i?o:o+"["+(s||"object"==r||"array"==r?n:"")+"]"),!o&&a?t.add(l.name,l.value):"array"==r||!i&&"object"==r?h(t,l,i,n):t.add(n,l)})}var m,v,g=0,y=window.document,w=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,x=/^(?:text|application)\/javascript/i,b=/^(?:text|application)\/xml/i,T="application/json",E="text/html",C=/^\s*$/;e.active=0,e.ajaxJSONP=function(t,n){if(!("type"in t))return e.ajax(t);var i,o,l=t.jsonpCallback,u=(e.isFunction(l)?l():l)||"jsonp"+ ++g,c=y.createElement("script"),d=window[u],f=function(t){e(c).triggerHandler("error",t||"abort")},p={abort:f};return n&&n.promise(p),e(c).on("load error",function(r,l){clearTimeout(o),e(c).off().remove(),"error"!=r.type&&i?a(i[0],p,t,n):s(null,l||"error",p,t,n),window[u]=d,i&&e.isFunction(d)&&d(i[0]),d=i=void 0}),r(p,t)===!1?(f("abort"),p):(window[u]=function(){i=arguments},c.src=t.url.replace(/\?(.+)=\?/,"?$1="+u),y.head.appendChild(c),t.timeout>0&&(o=setTimeout(function(){f("timeout")},t.timeout)),p)},e.ajaxSettings={type:"GET",beforeSend:u,success:u,error:u,complete:u,context:null,global:!0,xhr:function(){return new window.XMLHttpRequest},accepts:{script:"text/javascript, application/javascript, application/x-javascript",json:T,xml:"application/xml, text/xml",html:E,text:"text/plain"},crossDomain:!1,timeout:0,processData:!0,cache:!0},e.ajax=function(t){var n=e.extend({},t||{}),o=e.Deferred&&e.Deferred();for(m in e.ajaxSettings)void 0===n[m]&&(n[m]=e.ajaxSettings[m]);i(n),n.crossDomain||(n.crossDomain=/^([\w-]+:)?\/\/([^\/]+)/.test(n.url)&&RegExp.$2!=window.location.host),n.url||(n.url=window.location.toString()),f(n);var l=n.dataType,p=/\?.+=\?/.test(n.url);if(p&&(l="jsonp"),n.cache!==!1&&(t&&t.cache===!0||"script"!=l&&"jsonp"!=l)||(n.url=d(n.url,"_="+Date.now())),"jsonp"==l)return p||(n.url=d(n.url,n.jsonp?n.jsonp+"=?":n.jsonp===!1?"":"callback=?")),e.ajaxJSONP(n,o);var h,g=n.accepts[l],y={},w=function(e,t){y[e.toLowerCase()]=[e,t]},x=/^([\w-]+:)\/\//.test(n.url)?RegExp.$1:window.location.protocol,b=n.xhr(),T=b.setRequestHeader;if(o&&o.promise(b),n.crossDomain||w("X-Requested-With","XMLHttpRequest"),w("Accept",g||"*/*"),(g=n.mimeType||g)&&(g.indexOf(",")>-1&&(g=g.split(",",2)[0]),b.overrideMimeType&&b.overrideMimeType(g)),(n.contentType||n.contentType!==!1&&n.data&&"GET"!=n.type.toUpperCase())&&w("Content-Type",n.contentType||"application/x-www-form-urlencoded"),n.headers)for(v in n.headers)w(v,n.headers[v]);if(b.setRequestHeader=w,b.onreadystatechange=function(){if(4==b.readyState){b.onreadystatechange=u,clearTimeout(h);var t,i=!1;if(b.status>=200&&b.status<300||304==b.status||0==b.status&&"file:"==x){l=l||c(n.mimeType||b.getResponseHeader("content-type")),t=b.responseText;try{"script"==l?(1,eval)(t):"xml"==l?t=b.responseXML:"json"==l&&(t=C.test(t)?null:e.parseJSON(t))}catch(r){i=r}i?s(i,"parsererror",b,n,o):a(t,b,n,o)}else s(b.statusText||null,b.status?"error":"abort",b,n,o)}},r(b,n)===!1)return b.abort(),s(null,"abort",b,n,o),b;if(n.xhrFields)for(v in n.xhrFields)b[v]=n.xhrFields[v];var E="async"in n?n.async:!0;b.open(n.type,n.url,E,n.username,n.password);for(v in y)T.apply(b,y[v]);return n.timeout>0&&(h=setTimeout(function(){b.onreadystatechange=u,b.abort(),s(null,"timeout",b,n,o)},n.timeout)),b.send(n.data?n.data:null),b},e.get=function(){return e.ajax(p.apply(null,arguments))},e.post=function(){var t=p.apply(null,arguments);return t.type="POST",e.ajax(t)},e.getJSON=function(){var t=p.apply(null,arguments);return t.dataType="json",e.ajax(t)},e.fn.load=function(t,n,i){if(!this.length)return this;var o,r=this,a=t.split(/\s/),s=p(t,n,i),l=s.success;return a.length>1&&(s.url=a[0],o=a[1]),s.success=function(t){r.html(o?e("<div>").html(t.replace(w,"")).find(o):t),l&&l.apply(r,arguments)},e.ajax(s),this};var S=encodeURIComponent;e.param=function(e,t){var n=[];return n.add=function(e,t){this.push(S(e)+"="+S(t))},h(n,e,t),n.join("&").replace(/%20/g,"+")}}(Zepto),function(e){e.fn.serializeArray=function(){var t,n=[];return e([].slice.call(this.get(0).elements)).each(function(){t=e(this);var i=t.attr("type");"fieldset"!=this.nodeName.toLowerCase()&&!this.disabled&&"submit"!=i&&"reset"!=i&&"button"!=i&&("radio"!=i&&"checkbox"!=i||this.checked)&&n.push({name:t.attr("name"),value:t.val()})}),n},e.fn.serialize=function(){var e=[];return this.serializeArray().forEach(function(t){e.push(encodeURIComponent(t.name)+"="+encodeURIComponent(t.value))}),e.join("&")},e.fn.submit=function(t){if(t)this.bind("submit",t);else if(this.length){var n=e.Event("submit");this.eq(0).trigger(n),n.isDefaultPrevented()||this.get(0).submit()}return this}}(Zepto),function(e){"__proto__"in{}||e.extend(e.zepto,{Z:function(t,n){return t=t||[],e.extend(t,e.fn),t.selector=n||"",t.__Z=!0,t},isZ:function(t){return"array"===e.type(t)&&"__Z"in t}});try{getComputedStyle(void 0)}catch(t){var n=getComputedStyle;window.getComputedStyle=function(e){try{return n(e)}catch(t){return null}}}}(Zepto),function(e){var t,n=[];e.fn.remove=function(){return this.each(function(){this.parentNode&&("IMG"===this.tagName&&(n.push(this),this.src="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=",t&&clearTimeout(t),t=setTimeout(function(){n=[]},6e4)),this.parentNode.removeChild(this))})}}(Zepto),function(e){function t(t,i){var l=t[s],u=l&&o[l];if(void 0===i)return u||n(t);if(u){if(i in u)return u[i];var c=a(i);if(c in u)return u[c]}return r.call(e(t),i)}function n(t,n,r){var l=t[s]||(t[s]=++e.uuid),u=o[l]||(o[l]=i(t));return void 0!==n&&(u[a(n)]=r),u}function i(t){var n={};return e.each(t.attributes||l,function(t,i){0==i.name.indexOf("data-")&&(n[a(i.name.replace("data-",""))]=e.zepto.deserializeValue(i.value))}),n}var o={},r=e.fn.data,a=e.camelCase,s=e.expando="Zepto"+ +new Date,l=[];e.fn.data=function(i,o){return void 0===o?e.isPlainObject(i)?this.each(function(t,o){e.each(i,function(e,t){n(o,e,t)})}):0 in this?t(this[0],i):void 0:this.each(function(){n(this,i,o)})},e.fn.removeData=function(t){return"string"==typeof t&&(t=t.split(/\s+/)),this.each(function(){var n=this[s],i=n&&o[n];i&&e.each(t||i,function(e){delete i[t?a(this):e]})})},["remove","empty"].forEach(function(t){var n=e.fn[t];e.fn[t]=function(){var e=this.find("*");return"remove"===t&&(e=e.add(this)),e.removeData(),n.call(this)}})}(Zepto),function(e){function t(t){return t=e(t),!(!t.width()&&!t.height())&&"none"!==t.css("display")}function n(e,t){e=e.replace(/=#\]/g,'="#"]');var n,i,o=s.exec(e);if(o&&o[2]in a&&(n=a[o[2]],i=o[3],e=o[1],i)){var r=Number(i);i=isNaN(r)?i.replace(/^["']|["']$/g,""):r}return t(e,n,i)}var i=e.zepto,o=i.qsa,r=i.matches,a=e.expr[":"]={visible:function(){return t(this)?this:void 0},hidden:function(){return t(this)?void 0:this},selected:function(){return this.selected?this:void 0},checked:function(){return this.checked?this:void 0},parent:function(){return this.parentNode},first:function(e){return 0===e?this:void 0},last:function(e,t){return e===t.length-1?this:void 0},eq:function(e,t,n){return e===n?this:void 0},contains:function(t,n,i){return e(this).text().indexOf(i)>-1?this:void 0},has:function(e,t,n){return i.qsa(this,n).length?this:void 0}},s=new RegExp("(.*):(\\w+)(?:\\(([^)]+)\\))?$\\s*"),l=/^\s*>/,u="Zepto"+ +new Date;i.qsa=function(t,r){return n(r,function(n,a,s){try{var c;!n&&a?n="*":l.test(n)&&(c=e(t).addClass(u),n="."+u+" "+n);var d=o(t,n)}catch(f){throw console.error("error performing selector: %o",r),f}finally{c&&c.removeClass(u)}return a?i.uniq(e.map(d,function(e,t){return a.call(e,t,d,s)})):d})},i.matches=function(e,t){return n(t,function(t,n,i){return!(t&&!r(e,t)||n&&n.call(e,null,i)!==e)})}}(Zepto),function(e){function t(e,t,n,i){return Math.abs(e-t)>=Math.abs(n-i)?e-t>0?"Left":"Right":n-i>0?"Up":"Down"}function n(){c=null,f.last&&(f.el.trigger("longTap"),f={})}function i(){c&&clearTimeout(c),c=null}function o(){s&&clearTimeout(s),l&&clearTimeout(l),u&&clearTimeout(u),c&&clearTimeout(c),s=l=u=c=null,f={}}function r(e){return("touch"==e.pointerType||e.pointerType==e.MSPOINTER_TYPE_TOUCH)&&e.isPrimary}function a(e,t){return e.type=="pointer"+t||e.type.toLowerCase()=="mspointer"+t}var s,l,u,c,d,f={},p=750;e(document).ready(function(){var h,m,v,g,y=0,w=0;"MSGesture"in window&&(d=new MSGesture,d.target=document.body),e(document).bind("MSGestureEnd",function(e){var t=e.velocityX>1?"Right":e.velocityX<-1?"Left":e.velocityY>1?"Down":e.velocityY<-1?"Up":null;t&&(f.el.trigger("swipe"),f.el.trigger("swipe"+t))}).on("touchstart MSPointerDown pointerdown",function(t){(!(g=a(t,"down"))||r(t))&&(v=g?t:t.touches[0],t.touches&&1===t.touches.length&&f.x2&&(f.x2=void 0,f.y2=void 0),h=Date.now(),m=h-(f.last||h),f.el=e("tagName"in v.target?v.target:v.target.parentNode),s&&clearTimeout(s),f.x1=v.pageX,f.y1=v.pageY,m>0&&250>=m&&(f.isDoubleTap=!0),f.last=h,c=setTimeout(n,p),d&&g&&d.addPointer(t.pointerId))}).on("touchmove MSPointerMove pointermove",function(e){(!(g=a(e,"move"))||r(e))&&(v=g?e:e.touches[0],i(),f.x2=v.pageX,f.y2=v.pageY,y+=Math.abs(f.x1-f.x2),w+=Math.abs(f.y1-f.y2))}).on("touchend MSPointerUp pointerup",function(n){(!(g=a(n,"up"))||r(n))&&(i(),f.x2&&Math.abs(f.x1-f.x2)>30||f.y2&&Math.abs(f.y1-f.y2)>30?u=setTimeout(function(){f.el.trigger("swipe"),f.el.trigger("swipe"+t(f.x1,f.x2,f.y1,f.y2)),f={}},0):"last"in f&&(30>y&&30>w?l=setTimeout(function(){var t=e.Event("tap");t.cancelTouch=o,f.el.trigger(t),f.isDoubleTap?(f.el&&f.el.trigger("doubleTap"),f={}):s=setTimeout(function(){s=null,f.el&&f.el.trigger("singleTap"),f={}},250)},0):f={}),y=w=0)}).on("touchcancel MSPointerCancel pointercancel",o),e(window).on("scroll",o)}),["swipe","swipeLeft","swipeRight","swipeUp","swipeDown","doubleTap","tap","singleTap","longTap"].forEach(function(t){e.fn[t]=function(e){return this.on(t,e)}})}(Zepto),window.isRetina=function(e){if(e.devicePixelRatio>1)return!0;var t="(-webkit-min-device-pixel-ratio: 1.5),  	                  (min--moz-device-pixel-ratio: 1.5),  	                  (-o-min-device-pixel-ratio: 3/2),  	                  (min-resolution: 1.5dppx)";return!(!e.matchMedia||!e.matchMedia(t).matches)}(window),function(e,t){e.fn.unveil=function(n,i){function o(){var t=a.scrollTop(),i=t+a.height(),o=s.filter(function(){var o=e(this);if(!o.is(":hidden")){var r=o.offset().top,a=r+o.height();return a>=t-n&&i+n>=r}});r=o.trigger("unveil"),s=s.not(r)}var r,a=e(window),s=this;return n||(n=0),this.one("unveil",function(){var e=this.getAttribute("data-src");t&&(e=toRetina(e)),e&&(this.setAttribute("src",e),"function"==typeof i&&i.call(this))}),e(".content").scroll(o),a.on("scroll.unveil resize.unveil lookup.unveil",o),o(),this}}(window.jQuery||window.Zepto,window.isRetina),window.PUSH=function(){"use strict";function e(){r[m.id]=document.body.cloneNode(!0)}var t,n=function(){},i=20,o=sessionStorage,r={},a={"slide-in":"slide-out","slide-out":"slide-in",fade:"fade"},s={bartab:".bar-tab",barnav:".bar-nav",barfooter:".bar-footer",barheadersecondary:".bar-header-secondary"},l=function(e,t){m.id=e.id,t&&(e=d(e.id)),o[e.id]=JSON.stringify(e),window.history.replaceState(e.id,e.title,e.url)},u=function(){var e=m.id,t=JSON.parse(o.cacheForwardStack||"[]"),n=JSON.parse(o.cacheBackStack||"[]");for(n.push(e);t.length;)delete o[t.shift()];for(;n.length>i;)delete o[n.shift()];window.history.pushState(null,"",d(m.id).url),o.cacheForwardStack=JSON.stringify(t),o.cacheBackStack=JSON.stringify(n)},c=function(e,t){var n="forward"===t,i=JSON.parse(o.cacheForwardStack||"[]"),r=JSON.parse(o.cacheBackStack||"[]"),a=n?r:i,s=n?i:r;
m.id&&a.push(m.id),s.pop(),o.cacheForwardStack=JSON.stringify(i),o.cacheBackStack=JSON.stringify(r)},d=function(e){return JSON.parse(o[e]||null)||{}},f=function(e){var n=x(e.target);if(!(!n||e.which>1||e.metaKey||e.ctrlKey||t||location.protocol!==n.protocol||location.host!==n.host||!n.hash&&/#/.test(n.href)||n.hash&&n.href.replace(n.hash,"")===location.href.replace(location.hash,"")||"push"===n.getAttribute("data-ignore")))return n},p=function(e){var t=f(e);t&&(e.preventDefault(),m({url:t.href,hash:t.hash,timeout:t.getAttribute("data-timeout"),transition:t.getAttribute("data-transition")}))},h=function(e){var t,n,i,l,u,f,p,h,v=e.state;if(v&&o[v]){if(u=m.id<v?"forward":"back",c(v,u),i=d(v),l=r[v],i.title&&(document.title=i.title),"back"===u?(p=JSON.parse("back"===u?o.cacheForwardStack:o.cacheBackStack),h=d(p[p.length-1])):h=i,"back"===u&&!h.id)return m.id=v;if(f="back"===u?a[h.transition]:h.transition,!l)return m({id:i.id,url:i.url,title:i.title,timeout:i.timeout,transition:f,ignorePush:!0});if(h.transition){i=T(i,".content",l.cloneNode(!0));for(t in s)s.hasOwnProperty(t)&&(n=document.querySelector(s[t]),i[t]?y(i[t],n):n&&n.parentNode.removeChild(n))}y((i.contents||l).cloneNode(!0),document.querySelector(".content"),f,function(){w()}),m.id=v,document.body.offsetHeight}},m=function(t){var i,o=m.xhr;t.container=t.container||t.transition?document.querySelector(".content"):document.body;for(i in s)s.hasOwnProperty(i)&&(t[i]=t[i]||document.querySelector(s[i]));o&&o.readyState<4&&(o.onreadystatechange=n,o.abort()),o=new XMLHttpRequest,o.open("GET",t.url,!0),o.setRequestHeader("X-PUSH","true"),o.onreadystatechange=function(){t._timeout&&clearTimeout(t._timeout),4===o.readyState&&(200===o.status?v(o,t):g(t.url))},m.id||l({id:+new Date,url:window.location.href,title:document.title,timeout:t.timeout,transition:t.transition}),e(),t.timeout&&(t._timeout=setTimeout(function(){o.abort("timeout")},t.timeout)),o.send(),o.readyState&&!t.ignorePush&&u()},v=function(e,t){var n,i,o=E(e,t);if(!o.contents)return b(t.url);if(o.title&&(document.title=o.title),t.transition)for(n in s)s.hasOwnProperty(n)&&(i=document.querySelector(s[n]),o[n]?y(o[n],i):i&&i.parentNode.removeChild(i));y(o.contents,t.container,t.transition,function(){l({id:t.id||+new Date,url:o.url,title:o.title,timeout:t.timeout,transition:t.transition},t.id),w()}),!t.ignorePush&&window._gaq&&_gaq.push(["_trackPageview"]),!t.hash},g=function(e){throw new Error("Could not get: "+e)},y=function(e,t,n,i){var o,r,a;if(n?(o=/in$/.test(n),"fade"===n&&(t.classList.add("in"),t.classList.add("fade"),e.classList.add("fade")),/slide/.test(n)&&(e.classList.add("sliding-in",o?"right":"left"),e.classList.add("sliding"),t.classList.add("sliding")),t.parentNode.insertBefore(e,t)):t?t.innerHTML=e.innerHTML:e.classList.contains("content")?document.body.appendChild(e):document.body.insertBefore(e,document.querySelector(".content")),n||i&&i(),"fade"===n){t.offsetWidth,t.classList.remove("in");var s=function(){t.removeEventListener("webkitTransitionEnd",s),e.classList.add("in"),e.addEventListener("webkitTransitionEnd",l)},l=function(){e.removeEventListener("webkitTransitionEnd",l),t.parentNode.removeChild(t),e.classList.remove("fade"),e.classList.remove("in"),i&&i()};t.addEventListener("webkitTransitionEnd",s)}if(/slide/.test(n)){var u=function(){e.removeEventListener("webkitTransitionEnd",u),e.classList.remove("sliding","sliding-in"),e.classList.remove(a),t.parentNode.removeChild(t),i&&i()};t.offsetWidth,a=o?"right":"left",r=o?"left":"right",t.classList.add(r),e.classList.remove(a),e.addEventListener("webkitTransitionEnd",u)}},w=function(){var e=new CustomEvent("push",{detail:{state:d(m.id)},bubbles:!0,cancelable:!0});window.dispatchEvent(e)},x=function(e){for(var t,n=document.querySelectorAll("a");e&&e!==document;e=e.parentNode)for(t=n.length;t--;)if(n[t]===e)return e},b=function(e){window.history.replaceState(null,"","#"),window.location.replace(e)},T=function(e,t,n){var i,o={};for(i in e)e.hasOwnProperty(i)&&(o[i]=e[i]);return Object.keys(s).forEach(function(e){var t=n.querySelector(s[e]);t&&t.parentNode.removeChild(t),o[e]=t}),o.contents=n.querySelector(t),o},E=function(e,t){var n,i,o={},r=e.responseText;if(o.url=t.url,!r)return o;/<html/i.test(r)?(n=document.createElement("div"),i=document.createElement("div"),n.innerHTML=r.match(/<head[^>]*>([\s\S.]*)<\/head>/i)[0],i.innerHTML=r.match(/<body[^>]*>([\s\S.]*)<\/body>/i)[0]):(n=i=document.createElement("div"),n.innerHTML=r),o.title=n.querySelector("title");var a="innerText"in o.title?"innerText":"textContent";return o.title=o.title&&o.title[a].trim(),t.transition?o=T(o,".content",i):o.contents=i,o};window.addEventListener("touchstart",function(){t=!1}),window.addEventListener("touchmove",function(){t=!0}),window.addEventListener("touchend",p),window.addEventListener("click",function(e){f(e)&&e.preventDefault()}),window.addEventListener("popstate",h),window.PUSH=m},function(e,t){"function"==typeof define&&define.amd?define(t):"object"==typeof exports?module.exports=t():e.PhotoSwipe=t()}(this,function(){"use strict";var e=function(e,t,n,i){var o={features:null,bind:function(e,t,n,i){var o=(i?"remove":"add")+"EventListener";t=t.split(" ");for(var r=0;r<t.length;r++)t[r]&&e[o](t[r],n,!1)},isArray:function(e){return e instanceof Array},createEl:function(e,t){var n=document.createElement(t||"div");return e&&(n.className=e),n},getScrollY:function(){var e=window.pageYOffset;return void 0!==e?e:document.documentElement.scrollTop},unbind:function(e,t,n){o.bind(e,t,n,!0)},removeClass:function(e,t){var n=new RegExp("(\\s|^)"+t+"(\\s|$)");e.className=e.className.replace(n," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")},addClass:function(e,t){o.hasClass(e,t)||(e.className+=(e.className?" ":"")+t)},hasClass:function(e,t){return e.className&&new RegExp("(^|\\s)"+t+"(\\s|$)").test(e.className)},getChildByClass:function(e,t){for(var n=e.firstChild;n;){if(o.hasClass(n,t))return n;n=n.nextSibling}},arraySearch:function(e,t,n){for(var i=e.length;i--;)if(e[i][n]===t)return i;return-1},extend:function(e,t,n){for(var i in t)if(t.hasOwnProperty(i)){if(n&&e.hasOwnProperty(i))continue;e[i]=t[i]}},easing:{sine:{out:function(e){return Math.sin(e*(Math.PI/2))},inOut:function(e){return-(Math.cos(Math.PI*e)-1)/2}},cubic:{out:function(e){return--e*e*e+1}}},detectFeatures:function(){if(o.features)return o.features;var e=o.createEl(),t=e.style,n="",i={};if(i.oldIE=document.all&&!document.addEventListener,i.touch="ontouchstart"in window,window.requestAnimationFrame&&(i.raf=window.requestAnimationFrame,i.caf=window.cancelAnimationFrame),i.pointerEvent=navigator.pointerEnabled||navigator.msPointerEnabled,!i.pointerEvent){var r=navigator.userAgent;if(/iP(hone|od)/.test(navigator.platform)){var a=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);a&&a.length>0&&(a=parseInt(a[1],10),a>=1&&8>a&&(i.isOldIOSPhone=!0))}var s=r.match(/Android\s([0-9\.]*)/),l=s?s[1]:0;l=parseFloat(l),l>=1&&(4.4>l&&(i.isOldAndroid=!0),i.androidVersion=l),i.isMobileOpera=/opera mini|opera mobi/i.test(r)}for(var u,c,d=["transform","perspective","animationName"],f=["","webkit","Moz","ms","O"],p=0;4>p;p++){n=f[p];for(var h=0;3>h;h++)u=d[h],c=n+(n?u.charAt(0).toUpperCase()+u.slice(1):u),!i[u]&&c in t&&(i[u]=c);n&&!i.raf&&(n=n.toLowerCase(),i.raf=window[n+"RequestAnimationFrame"],i.raf&&(i.caf=window[n+"CancelAnimationFrame"]||window[n+"CancelRequestAnimationFrame"]))}if(!i.raf){var m=0;i.raf=function(e){var t=(new Date).getTime(),n=Math.max(0,16-(t-m)),i=window.setTimeout(function(){e(t+n)},n);return m=t+n,i},i.caf=function(e){clearTimeout(e)}}return i.svg=!!document.createElementNS&&!!document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect,o.features=i,i}};o.detectFeatures(),o.features.oldIE&&(o.bind=function(e,t,n,i){t=t.split(" ");for(var o,r=(i?"detach":"attach")+"Event",a=function(){n.handleEvent.call(n)},s=0;s<t.length;s++)if(o=t[s])if("object"==typeof n&&n.handleEvent){if(i){if(!n["oldIE"+o])return!1}else n["oldIE"+o]=a;e[r]("on"+o,n["oldIE"+o])}else e[r]("on"+o,n)});var r=this,a=25,s=3,l={allowPanToNext:!0,spacing:.12,bgOpacity:1,mouseUsed:!1,loop:!0,pinchToClose:!0,closeOnScroll:!0,closeOnVerticalDrag:!0,hideAnimationDuration:333,showAnimationDuration:333,showHideOpacity:!1,focus:!0,escKey:!0,arrowKeys:!0,mainScrollEndFriction:.35,panEndFriction:.35,isClickableElement:function(e){return"A"===e.tagName},getDoubleTapZoom:function(e,t){return e?1:t.initialZoomLevel<.7?1:1.5},maxSpreadZoom:2,scaleMode:"fit",modal:!0,alwaysFadeIn:!1};o.extend(l,i);var u,c,d,f,p,h,m,v,g,y,w,x,b,T,E,C,S,I,D,k,O,M,_,L,A,P,N,F,R,Z,z,j,U,H,q,B,$,K,W,G,V,Y,X,J,Q,et,tt,nt,it,ot,rt,at,st,lt,ut,ct,dt,ft,pt=function(){return{x:0,y:0}},ht=pt(),mt=pt(),vt=pt(),gt={},yt=0,wt=pt(),xt=0,bt=!0,Tt=[],Et={},Ct=function(e,t){o.extend(r,t.publicMethods),Tt.push(e)},St=function(e){var t=ei();return e>t-1?e-t:0>e?t+e:e},It={},Dt=function(e,t){return It[e]||(It[e]=[]),It[e].push(t)},kt=function(e){var t=It[e];if(t){var n=Array.prototype.slice.call(arguments);n.shift();for(var i=0;i<t.length;i++)t[i].apply(r,n)}},Ot=function(){return(new Date).getTime()},Mt=function(e){ct=e,r.bg.style.opacity=e*l.bgOpacity},_t=function(e,t,n,i){e[L]=x+t+"px, "+n+"px"+b+" scale("+i+")"},Lt=function(){rt&&_t(rt,vt.x,vt.y,y)},At=function(e){e.container&&_t(e.container.style,e.initialPosition.x,e.initialPosition.y,e.initialZoomLevel)},Pt=function(e,t){t[L]=x+e+"px, 0px"+b},Nt=function(e,t){if(!l.loop&&t){var n=f+(wt.x*yt-e)/wt.x,i=Math.round(e-wn.x);(0>n&&i>0||n>=ei()-1&&0>i)&&(e=wn.x+i*l.mainScrollEndFriction)}wn.x=e,Pt(e,p)},Ft=function(e,t){var n=xn[e]-C[e];return mt[e]+ht[e]+n-n*(t/w)},Rt=function(e,t){e.x=t.x,e.y=t.y,t.id&&(e.id=t.id)},Zt=function(e){e.x=Math.round(e.x),e.y=Math.round(e.y)},zt=null,jt=function(){zt&&(o.unbind(document,"mousemove",jt),o.addClass(e,"pswp--has_mouse"),l.mouseUsed=!0,kt("mouseUsed")),zt=setTimeout(function(){zt=null},100)},Ut=function(){o.bind(document,"keydown",r),U.transform&&o.bind(r.scrollWrap,"click",r),l.mouseUsed||o.bind(document,"mousemove",jt),o.bind(window,"resize scroll",r),kt("bindEvents")},Ht=function(){o.unbind(window,"resize",r),o.unbind(window,"scroll",g.scroll),o.unbind(document,"keydown",r),o.unbind(document,"mousemove",jt),U.transform&&o.unbind(r.scrollWrap,"click",r),G&&o.unbind(window,m,r),kt("unbindEvents")},qt=function(e,t){var n=li(r.currItem,gt,e);return t&&(ot=n),n},Bt=function(e){return e||(e=r.currItem),e.initialZoomLevel},$t=function(e){return e||(e=r.currItem),e.w>0?l.maxSpreadZoom:1},Kt=function(e,t,n,i){return i===r.currItem.initialZoomLevel?(n[e]=r.currItem.initialPosition[e],!0):(n[e]=Ft(e,i),n[e]>t.min[e]?(n[e]=t.min[e],!0):n[e]<t.max[e]?(n[e]=t.max[e],!0):!1)},Wt=function(){if(L){var t=U.perspective&&!P;return x="translate"+(t?"3d(":"("),void(b=U.perspective?", 0px)":")")}L="left",o.addClass(e,"pswp--ie"),Pt=function(e,t){t.left=e+"px"},At=function(e){var t=e.container.style,n=e.fitRatio*e.w,i=e.fitRatio*e.h;t.width=n+"px",t.height=i+"px",t.left=e.initialPosition.x+"px",t.top=e.initialPosition.y+"px"},Lt=function(){if(rt){var e=rt,t=r.currItem,n=t.fitRatio*t.w,i=t.fitRatio*t.h;e.width=n+"px",e.height=i+"px",e.left=vt.x+"px",e.top=vt.y+"px"}}},Gt=function(e){var t="";l.escKey&&27===e.keyCode?t="close":l.arrowKeys&&(37===e.keyCode?t="prev":39===e.keyCode&&(t="next")),t&&(e.ctrlKey||e.altKey||e.shiftKey||e.metaKey||(e.preventDefault?e.preventDefault():e.returnValue=!1,r[t]()))},Vt=function(e){e&&(X||Y||at||K)&&(e.preventDefault(),e.stopPropagation())},Yt=function(){S=!0,l.closeOnScroll&&u&&(!r.likelyTouchDevice||l.mouseUsed)&&Math.abs(o.getScrollY()-Z)>2&&(d=!0,r.close())},Xt={},Jt=0,Qt=function(e){Xt[e]&&(Xt[e].raf&&F(Xt[e].raf),Jt--,delete Xt[e])},en=function(e){Xt[e]&&Qt(e),Xt[e]||(Jt++,Xt[e]={})},tn=function(){for(var e in Xt)Xt.hasOwnProperty(e)&&Qt(e)},nn=function(e,t,n,i,o,r,a){var s,l=Ot();en(e);var u=function(){if(Xt[e]){if(s=Ot()-l,s>=i)return Qt(e),r(n),void(a&&a());r((n-t)*o(s/i)+t),Xt[e].raf=N(u)}};u()},on={shout:kt,listen:Dt,viewportSize:gt,options:l,isMainScrollAnimating:function(){return at},getZoomLevel:function(){return y},getCurrentIndex:function(){return f},isDragging:function(){return G},isZooming:function(){return tt},applyZoomPan:function(e,t,n){vt.x=t,vt.y=n,y=e,Lt()},init:function(){if(!u&&!c){var n;r.framework=o,r.template=e,r.bg=o.getChildByClass(e,"pswp__bg"),R=e.className,u=!0,U=o.detectFeatures(),N=U.raf,F=U.caf,L=U.transform,z=U.oldIE,r.scrollWrap=o.getChildByClass(e,"pswp__scroll-wrap"),r.container=o.getChildByClass(r.scrollWrap,"pswp__container"),p=r.container.style,r.itemHolders=I=[{el:r.container.children[0],wrap:0,index:-1},{el:r.container.children[1],wrap:0,index:-1},{el:r.container.children[2],wrap:0,index:-1}],I[0].el.style.display=I[2].el.style.display="none",Wt(),g={resize:r.updateSize,scroll:Yt,keydown:Gt,click:Vt};var i=U.isOldIOSPhone||U.isOldAndroid||U.isMobileOpera;for(U.animationName&&U.transform&&!i||(l.showAnimationDuration=l.hideAnimationDuration=0),n=0;n<Tt.length;n++)r["init"+Tt[n]]();if(t){var a=r.ui=new t(r,o);a.init()}kt("firstUpdate"),f=f||l.index||0,(isNaN(f)||0>f||f>=ei())&&(f=0),r.currItem=Qn(f),(U.isOldIOSPhone||U.isOldAndroid)&&(bt=!1),l.modal&&(e.setAttribute("aria-hidden","false"),bt?e.style.position="fixed":(e.style.position="absolute",e.style.top=o.getScrollY()+"px")),void 0===j&&(kt("initialLayout"),j=Z=o.getScrollY());var d="pswp--open ";for(l.mainClass&&(d+=l.mainClass+" "),l.showHideOpacity&&(d+="pswp--animate_opacity "),d+=P?"pswp--touch":"pswp--notouch",d+=U.animationName?" pswp--css_animation":"",d+=U.svg?" pswp--svg":"",o.addClass(e,d),r.updateSize(),h=-1,xt=null,n=0;s>n;n++)Pt((n+h)*wt.x,I[n].el.style);z||o.bind(r.scrollWrap,v,r),Dt("initialZoomInEnd",function(){r.setContent(I[0],f-1),r.setContent(I[2],f+1),I[0].el.style.display=I[2].el.style.display="block",l.focus&&e.focus(),Ut()}),r.setContent(I[1],f),r.updateCurrItem(),kt("afterInit"),bt||(T=setInterval(function(){Jt||G||tt||y!==r.currItem.initialZoomLevel||r.updateSize()},1e3)),o.addClass(e,"pswp--visible")}},close:function(){u&&(u=!1,c=!0,kt("close"),Ht(),ni(r.currItem,null,!0,r.destroy))},destroy:function(){kt("destroy"),Vn&&clearTimeout(Vn),l.modal&&(e.setAttribute("aria-hidden","true"),e.className=R),T&&clearInterval(T),o.unbind(r.scrollWrap,v,r),o.unbind(window,"scroll",r),Sn(),tn(),It=null},panTo:function(e,t,n){n||(e>ot.min.x?e=ot.min.x:e<ot.max.x&&(e=ot.max.x),t>ot.min.y?t=ot.min.y:t<ot.max.y&&(t=ot.max.y)),vt.x=e,vt.y=t,Lt()},handleEvent:function(e){e=e||window.event,g[e.type]&&g[e.type](e)},goTo:function(e){e=St(e);var t=e-f;xt=t,f=e,r.currItem=Qn(f),yt-=t,Nt(wt.x*yt),tn(),at=!1,r.updateCurrItem()},next:function(){r.goTo(f+1)},prev:function(){r.goTo(f-1)},updateCurrZoomItem:function(e){if(e&&kt("beforeChange",0),I[1].el.children.length){var t=I[1].el.children[0];rt=o.hasClass(t,"pswp__zoom-wrap")?t.style:null}else rt=null;ot=r.currItem.bounds,w=y=r.currItem.initialZoomLevel,vt.x=ot.center.x,vt.y=ot.center.y,e&&kt("afterChange")},invalidateCurrItems:function(){E=!0;for(var e=0;s>e;e++)I[e].item&&(I[e].item.needsUpdate=!0)},updateCurrItem:function(e){if(0!==xt){var t,n=Math.abs(xt);if(!(e&&2>n)){r.currItem=Qn(f),kt("beforeChange",xt),n>=s&&(h+=xt+(xt>0?-s:s),n=s);for(var i=0;n>i;i++)xt>0?(t=I.shift(),I[s-1]=t,h++,Pt((h+2)*wt.x,t.el.style),r.setContent(t,f-n+i+1+1)):(t=I.pop(),I.unshift(t),h--,Pt(h*wt.x,t.el.style),r.setContent(t,f+n-i-1-1));if(rt&&1===Math.abs(xt)){var o=Qn(D);o.initialZoomLevel!==y&&(li(o,gt),At(o))}xt=0,r.updateCurrZoomItem(),D=f,kt("afterChange")}}},updateSize:function(t){if(!bt){var n=o.getScrollY();if(j!==n&&(e.style.top=n+"px",j=n),!t&&Et.x===window.innerWidth&&Et.y===window.innerHeight)return;Et.x=window.innerWidth,Et.y=window.innerHeight,e.style.height=Et.y+"px"}if(gt.x=r.scrollWrap.clientWidth,gt.y=r.scrollWrap.clientHeight,C={x:0,y:j},wt.x=gt.x+Math.round(gt.x*l.spacing),wt.y=gt.y,Nt(wt.x*yt),kt("beforeResize"),void 0!==h){for(var i,a,u,c=0;s>c;c++)i=I[c],Pt((c+h)*wt.x,i.el.style),u=St(f+c-1),a=Qn(u),E||a.needsUpdate||!a.bounds?(a&&r.cleanSlide(a),r.setContent(i,u),1===c&&(r.currItem=a,r.updateCurrZoomItem(!0)),a.needsUpdate=!1):-1===i.index&&u>=0&&r.setContent(i,u),a&&a.container&&(li(a,gt),At(a));E=!1}w=y=r.currItem.initialZoomLevel,ot=r.currItem.bounds,ot&&(vt.x=ot.center.x,vt.y=ot.center.y,Lt()),kt("resize")},zoomTo:function(e,t,n,i,r){t&&(w=y,xn.x=Math.abs(t.x)-vt.x,xn.y=Math.abs(t.y)-vt.y,Rt(mt,vt));var a=qt(e,!1),s={};Kt("x",a,s,e),Kt("y",a,s,e);var l=y,u={x:vt.x,y:vt.y};Zt(s);var c=function(t){1===t?(y=e,vt.x=s.x,vt.y=s.y):(y=(e-l)*t+l,vt.x=(s.x-u.x)*t+u.x,vt.y=(s.y-u.y)*t+u.y),r&&r(t),Lt()};n?nn("customZoomTo",0,1,n,i||o.easing.sine.inOut,c):c(1)}},rn=30,an=10,sn={},ln={},un={},cn={},dn={},fn=[],pn={},hn=[],mn={},vn=0,gn=pt(),yn=0,wn=pt(),xn=pt(),bn=pt(),Tn=function(e,t){return e.x===t.x&&e.y===t.y},En=function(e,t){return Math.abs(e.x-t.x)<a&&Math.abs(e.y-t.y)<a},Cn=function(e,t){return mn.x=Math.abs(e.x-t.x),mn.y=Math.abs(e.y-t.y),Math.sqrt(mn.x*mn.x+mn.y*mn.y)},Sn=function(){J&&(F(J),J=null)},In=function(){G&&(J=N(In),Hn())},Dn=function(){return!("fit"===l.scaleMode&&y===r.currItem.initialZoomLevel)},kn=function(e,t){return e?e.className&&e.className.indexOf("pswp__scroll-wrap")>-1?!1:t(e)?e:kn(e.parentNode,t):!1},On={},Mn=function(e,t){return On.prevent=!kn(e.target,l.isClickableElement),kt("preventDragEvent",e,t,On),On.prevent},_n=function(e,t){return t.x=e.pageX,t.y=e.pageY,t.id=e.identifier,t},Ln=function(e,t,n){n.x=.5*(e.x+t.x),n.y=.5*(e.y+t.y)},An=function(e,t,n){if(e-q>50){var i=hn.length>2?hn.shift():{};i.x=t,i.y=n,hn.push(i),q=e}},Pn=function(){var e=vt.y-r.currItem.initialPosition.y;return 1-Math.abs(e/(gt.y/2))},Nn={},Fn={},Rn=[],Zn=function(e){for(;Rn.length>0;)Rn.pop();return A?(ft=0,fn.forEach(function(e){0===ft?Rn[0]=e:1===ft&&(Rn[1]=e),ft++})):e.type.indexOf("touch")>-1?e.touches&&e.touches.length>0&&(Rn[0]=_n(e.touches[0],Nn),e.touches.length>1&&(Rn[1]=_n(e.touches[1],Fn))):(Nn.x=e.pageX,Nn.y=e.pageY,Nn.id="",Rn[0]=Nn),Rn},zn=function(e,t){var n,i,o,a,s=0,u=vt[e]+t[e],c=t[e]>0,d=wn.x+t.x,f=wn.x-pn.x;return n=u>ot.min[e]||u<ot.max[e]?l.panEndFriction:1,u=vt[e]+t[e]*n,!l.allowPanToNext&&y!==r.currItem.initialZoomLevel||(rt?"h"!==st||"x"!==e||Y||(c?(u>ot.min[e]&&(n=l.panEndFriction,s=ot.min[e]-u,i=ot.min[e]-mt[e]),(0>=i||0>f)&&ei()>1?(a=d,0>f&&d>pn.x&&(a=pn.x)):ot.min.x!==ot.max.x&&(o=u)):(u<ot.max[e]&&(n=l.panEndFriction,s=u-ot.max[e],i=mt[e]-ot.max[e]),(0>=i||f>0)&&ei()>1?(a=d,f>0&&d<pn.x&&(a=pn.x)):ot.min.x!==ot.max.x&&(o=u))):a=d,"x"!==e)?void(at||Q||y>r.currItem.fitRatio&&(vt[e]+=t[e]*n)):(void 0!==a&&(Nt(a,!0),Q=a===pn.x?!1:!0),ot.min.x!==ot.max.x&&(void 0!==o?vt.x=o:Q||(vt.x+=t.x*n)),void 0!==a)},jn=function(e){if(!("mousedown"===e.type&&e.button>0)){if(Jn)return void e.preventDefault();if(!W||"mousedown"!==e.type){if(Mn(e,!0)&&e.preventDefault(),kt("pointerDown"),A){var t=o.arraySearch(fn,e.pointerId,"id");0>t&&(t=fn.length),fn[t]={x:e.pageX,y:e.pageY,id:e.pointerId}}var n=Zn(e),i=n.length;et=null,tn(),G&&1!==i||(G=lt=!0,o.bind(window,m,r),$=dt=ut=K=Q=X=V=Y=!1,st=null,kt("firstTouchStart",n),Rt(mt,vt),ht.x=ht.y=0,Rt(cn,n[0]),Rt(dn,cn),pn.x=wt.x*yt,hn=[{x:cn.x,y:cn.y}],q=H=Ot(),qt(y,!0),Sn(),In()),!tt&&i>1&&!at&&!Q&&(w=y,Y=!1,tt=V=!0,ht.y=ht.x=0,Rt(mt,vt),Rt(sn,n[0]),Rt(ln,n[1]),Ln(sn,ln,bn),xn.x=Math.abs(bn.x)-vt.x,xn.y=Math.abs(bn.y)-vt.y,nt=it=Cn(sn,ln))}}},Un=function(e){if(e.preventDefault(),A){var t=o.arraySearch(fn,e.pointerId,"id");if(t>-1){var n=fn[t];n.x=e.pageX,n.y=e.pageY}}if(G){var i=Zn(e);if(st||X||tt)et=i;else{var r=Math.abs(i[0].x-cn.x)-Math.abs(i[0].y-cn.y);Math.abs(r)>=an&&(st=r>0?"h":"v",et=i)}}},Hn=function(){if(et){var e=et.length;if(0!==e)if(Rt(sn,et[0]),un.x=sn.x-cn.x,un.y=sn.y-cn.y,tt&&e>1){if(cn.x=sn.x,cn.y=sn.y,!un.x&&!un.y&&Tn(et[1],ln))return;Rt(ln,et[1]),Y||(Y=!0,kt("zoomGestureStarted"));var t=Cn(sn,ln),n=Wn(t);n>r.currItem.initialZoomLevel+r.currItem.initialZoomLevel/15&&(dt=!0);var i=1,o=Bt(),a=$t();if(o>n)if(l.pinchToClose&&!dt&&w<=r.currItem.initialZoomLevel){var s=o-n,u=1-s/(o/1.2);Mt(u),kt("onPinchClose",u),ut=!0}else i=(o-n)/o,i>1&&(i=1),n=o-i*(o/3);else n>a&&(i=(n-a)/(6*o),i>1&&(i=1),n=a+i*o);0>i&&(i=0),nt=t,Ln(sn,ln,gn),ht.x+=gn.x-bn.x,ht.y+=gn.y-bn.y,Rt(bn,gn),vt.x=Ft("x",n),vt.y=Ft("y",n),$=n>y,y=n,Lt()}else{if(!st)return;if(lt&&(lt=!1,Math.abs(un.x)>=an&&(un.x-=et[0].x-dn.x),Math.abs(un.y)>=an&&(un.y-=et[0].y-dn.y)),cn.x=sn.x,cn.y=sn.y,0===un.x&&0===un.y)return;if("v"===st&&l.closeOnVerticalDrag&&!Dn()){ht.y+=un.y,vt.y+=un.y;var c=Pn();return K=!0,kt("onVerticalDrag",c),Mt(c),void Lt()}An(Ot(),sn.x,sn.y),X=!0,ot=r.currItem.bounds;var d=zn("x",un);d||(zn("y",un),Zt(vt),Lt())}}},qn=function(e){if(U.isOldAndroid){if(W&&"mouseup"===e.type)return;e.type.indexOf("touch")>-1&&(clearTimeout(W),W=setTimeout(function(){W=0},600))}kt("pointerUp"),Mn(e,!1)&&e.preventDefault();var t;if(A){var n=o.arraySearch(fn,e.pointerId,"id");if(n>-1)if(t=fn.splice(n,1)[0],navigator.pointerEnabled)t.type=e.pointerType||"mouse";else{var i={4:"mouse",2:"touch",3:"pen"};t.type=i[e.pointerType],t.type||(t.type=e.pointerType||"mouse")}}var a,s=Zn(e),l=s.length;if("mouseup"===e.type&&(l=0),2===l)return et=null,!0;1===l&&Rt(dn,s[0]),0!==l||st||at||(t||("mouseup"===e.type?t={x:e.pageX,y:e.pageY,type:"mouse"}:e.changedTouches&&e.changedTouches[0]&&(t={x:e.changedTouches[0].pageX,y:e.changedTouches[0].pageY,type:"touch"})),kt("touchRelease",e,t));var u=-1;if(0===l&&(G=!1,o.unbind(window,m,r),Sn(),tt?u=0:-1!==yn&&(u=Ot()-yn)),yn=1===l?Ot():-1,a=-1!==u&&150>u?"zoom":"swipe",tt&&2>l&&(tt=!1,1===l&&(a="zoomPointerUp"),kt("zoomGestureEnded")),et=null,X||Y||at||K)if(tn(),B||(B=Bn()),B.calculateSwipeSpeed("x"),K){var c=Pn();if(.6>c)r.close();else{var d=vt.y,f=ct;nn("verticalDrag",0,1,300,o.easing.cubic.out,function(e){vt.y=(r.currItem.initialPosition.y-d)*e+d,Mt((1-f)*e+f),Lt()}),kt("onVerticalDrag",1)}}else{if((Q||at)&&0===l){var p=Kn(a,B);if(p)return;a="zoomPointerUp"}if(!at)return"swipe"!==a?void Gn():void(!Q&&y>r.currItem.fitRatio&&$n(B))}},Bn=function(){var e,t,n={lastFlickOffset:{},lastFlickDist:{},lastFlickSpeed:{},slowDownRatio:{},slowDownRatioReverse:{},speedDecelerationRatio:{},speedDecelerationRatioAbs:{},distanceOffset:{},backAnimDestination:{},backAnimStarted:{},calculateSwipeSpeed:function(i){hn.length>1?(e=Ot()-q+50,t=hn[hn.length-2][i]):(e=Ot()-H,t=dn[i]),n.lastFlickOffset[i]=cn[i]-t,n.lastFlickDist[i]=Math.abs(n.lastFlickOffset[i]),n.lastFlickSpeed[i]=n.lastFlickDist[i]>20?n.lastFlickOffset[i]/e:0,Math.abs(n.lastFlickSpeed[i])<.1&&(n.lastFlickSpeed[i]=0),n.slowDownRatio[i]=.95,n.slowDownRatioReverse[i]=1-n.slowDownRatio[i],n.speedDecelerationRatio[i]=1},calculateOverBoundsAnimOffset:function(e,t){n.backAnimStarted[e]||(vt[e]>ot.min[e]?n.backAnimDestination[e]=ot.min[e]:vt[e]<ot.max[e]&&(n.backAnimDestination[e]=ot.max[e]),void 0!==n.backAnimDestination[e]&&(n.slowDownRatio[e]=.7,n.slowDownRatioReverse[e]=1-n.slowDownRatio[e],n.speedDecelerationRatioAbs[e]<.05&&(n.lastFlickSpeed[e]=0,n.backAnimStarted[e]=!0,nn("bounceZoomPan"+e,vt[e],n.backAnimDestination[e],t||300,o.easing.sine.out,function(t){vt[e]=t,Lt()}))))},calculateAnimOffset:function(e){n.backAnimStarted[e]||(n.speedDecelerationRatio[e]=n.speedDecelerationRatio[e]*(n.slowDownRatio[e]+n.slowDownRatioReverse[e]-n.slowDownRatioReverse[e]*n.timeDiff/10),n.speedDecelerationRatioAbs[e]=Math.abs(n.lastFlickSpeed[e]*n.speedDecelerationRatio[e]),n.distanceOffset[e]=n.lastFlickSpeed[e]*n.speedDecelerationRatio[e]*n.timeDiff,vt[e]+=n.distanceOffset[e])},panAnimLoop:function(){return Xt.zoomPan&&(Xt.zoomPan.raf=N(n.panAnimLoop),n.now=Ot(),n.timeDiff=n.now-n.lastNow,n.lastNow=n.now,n.calculateAnimOffset("x"),n.calculateAnimOffset("y"),Lt(),n.calculateOverBoundsAnimOffset("x"),n.calculateOverBoundsAnimOffset("y"),n.speedDecelerationRatioAbs.x<.05&&n.speedDecelerationRatioAbs.y<.05)?(vt.x=Math.round(vt.x),vt.y=Math.round(vt.y),Lt(),void Qt("zoomPan")):void 0}};return n},$n=function(e){return e.calculateSwipeSpeed("y"),ot=r.currItem.bounds,e.backAnimDestination={},e.backAnimStarted={},Math.abs(e.lastFlickSpeed.x)<=.05&&Math.abs(e.lastFlickSpeed.y)<=.05?(e.speedDecelerationRatioAbs.x=e.speedDecelerationRatioAbs.y=0,e.calculateOverBoundsAnimOffset("x"),e.calculateOverBoundsAnimOffset("y"),!0):(en("zoomPan"),e.lastNow=Ot(),void e.panAnimLoop())},Kn=function(e,t){var n;at||(vn=f);var i;if("swipe"===e){var a=cn.x-dn.x,s=t.lastFlickDist.x<10;a>rn&&(s||t.lastFlickOffset.x>20)?i=-1:-rn>a&&(s||t.lastFlickOffset.x<-20)&&(i=1)}var u;i&&(f+=i,0>f?(f=l.loop?ei()-1:0,u=!0):f>=ei()&&(f=l.loop?0:ei()-1,u=!0),(!u||l.loop)&&(xt+=i,yt-=i,n=!0));var c,d=wt.x*yt,p=Math.abs(d-wn.x);return n||d>wn.x==t.lastFlickSpeed.x>0?(c=Math.abs(t.lastFlickSpeed.x)>0?p/Math.abs(t.lastFlickSpeed.x):333,c=Math.min(c,400),c=Math.max(c,250)):c=333,vn===f&&(n=!1),at=!0,nn("mainScroll",wn.x,d,c,o.easing.cubic.out,Nt,function(){tn(),at=!1,vn=-1,(n||vn!==f)&&r.updateCurrItem(),kt("mainScrollAnimComplete")}),n&&r.updateCurrItem(!0),n},Wn=function(e){return 1/it*e*w},Gn=function(){var e=y,t=Bt(),n=$t();t>y?e=t:y>n&&(e=n);var i,a=1,s=ct;return ut&&!$&&!dt&&t>y?(r.close(),!0):(ut&&(i=function(e){Mt((a-s)*e+s)}),r.zoomTo(e,0,300,o.easing.cubic.out,i),!0)};Ct("Gestures",{publicMethods:{initGestures:function(){var e=function(e,t,n,i,o){k=e+t,O=e+n,M=e+i,_=o?e+o:""};A=U.pointerEvent,A&&U.touch&&(U.touch=!1),A?navigator.pointerEnabled?e("pointer","down","move","up","cancel"):e("MSPointer","Down","Move","Up","Cancel"):U.touch?(e("touch","start","move","end","cancel"),P=!0):e("mouse","down","move","up"),m=O+" "+M+" "+_,v=k,A&&!P&&(P=navigator.maxTouchPoints>1||navigator.msMaxTouchPoints>1),r.likelyTouchDevice=P,g[k]=jn,g[O]=Un,g[M]=qn,_&&(g[_]=g[M]),U.touch&&(v+=" mousedown",m+=" mousemove mouseup",g.mousedown=g[k],g.mousemove=g[O],g.mouseup=g[M]),P||(l.allowPanToNext=!1)}}});var Vn,Yn,Xn,Jn,Qn,ei,ti,ni=function(t,n,i,a){Vn&&clearTimeout(Vn),Jn=!0,Xn=!0;var s;t.initialLayout?(s=t.initialLayout,t.initialLayout=null):s=l.getThumbBoundsFn&&l.getThumbBoundsFn(f);var u=i?l.hideAnimationDuration:l.showAnimationDuration,c=function(){Qt("initialZoom"),i?(r.template.removeAttribute("style"),r.bg.removeAttribute("style")):(Mt(1),n&&(n.style.display="block"),o.addClass(e,"pswp--animated-in"),kt("initialZoom"+(i?"OutEnd":"InEnd"))),a&&a(),Jn=!1};if(!u||!s||void 0===s.x){var p=function(){kt("initialZoom"+(i?"Out":"In")),y=t.initialZoomLevel,Rt(vt,t.initialPosition),Lt(),e.style.opacity=i?0:1,Mt(1),c()};return void p()}var h=function(){var n=d,a=!r.currItem.src||r.currItem.loadError||l.showHideOpacity;t.miniImg&&(t.miniImg.style.webkitBackfaceVisibility="hidden"),i||(y=s.w/t.w,vt.x=s.x,vt.y=s.y-Z,r[a?"template":"bg"].style.opacity=.001,Lt()),en("initialZoom"),i&&!n&&o.removeClass(e,"pswp--animated-in"),a&&(i?o[(n?"remove":"add")+"Class"](e,"pswp--animate_opacity"):setTimeout(function(){o.addClass(e,"pswp--animate_opacity")},30)),Vn=setTimeout(function(){if(kt("initialZoom"+(i?"Out":"In")),i){var r=s.w/t.w,l={x:vt.x,y:vt.y},d=y,f=Z,p=ct,h=function(t){S&&(f=o.getScrollY(),S=!1),1===t?(y=r,vt.x=s.x,vt.y=s.y-f):(y=(r-d)*t+d,vt.x=(s.x-l.x)*t+l.x,vt.y=(s.y-f-l.y)*t+l.y),Lt(),a?e.style.opacity=1-t:Mt(p-t*p)};n?nn("initialZoom",0,1,u,o.easing.cubic.out,h,c):(h(1),Vn=setTimeout(c,u+20))}else y=t.initialZoomLevel,Rt(vt,t.initialPosition),Lt(),Mt(1),a?e.style.opacity=1:Mt(1),Vn=setTimeout(c,u+20)},i?25:90)};h()},ii={},oi=[],ri={index:0,errorMsg:'<div class="pswp__error-msg"><a href="%url%" target="_blank">The image</a> could not be loaded.</div>',forceProgressiveLoading:!1,preload:[1,1],getNumItemsFn:function(){return Yn.length}},ai=function(){return{center:{x:0,y:0},max:{x:0,y:0},min:{x:0,y:0}}},si=function(e,t,n){var i=e.bounds;i.center.x=Math.round((ii.x-t)/2),i.center.y=Math.round((ii.y-n)/2)+e.vGap.top,i.max.x=t>ii.x?Math.round(ii.x-t):i.center.x,i.max.y=n>ii.y?Math.round(ii.y-n)+e.vGap.top:i.center.y,i.min.x=t>ii.x?0:i.center.x,i.min.y=n>ii.y?e.vGap.top:i.center.y},li=function(e,t,n){if(e.src&&!e.loadError){var i=!n;if(i&&(e.vGap||(e.vGap={top:0,bottom:0}),kt("parseVerticalMargin",e)),ii.x=t.x,ii.y=t.y-e.vGap.top-e.vGap.bottom,i){var o=ii.x/e.w,r=ii.y/e.h;e.fitRatio=r>o?o:r;var a=l.scaleMode;"orig"===a?n=1:"fit"===a&&(n=e.fitRatio),n>1&&(n=1),e.initialZoomLevel=n,e.bounds||(e.bounds=ai())}if(!n)return;return si(e,e.w*n,e.h*n),i&&n===e.initialZoomLevel&&(e.initialPosition=e.bounds.center),e.bounds}return e.w=e.h=0,e.initialZoomLevel=e.fitRatio=1,e.bounds=ai(),e.initialPosition=e.bounds.center,e.bounds},ui=function(e,t,n,i,o,a){if(!t.loadError){var s,u=r.isDragging()&&!r.isZooming(),c=e===f||r.isMainScrollAnimating()||u;!o&&(P||l.alwaysFadeIn)&&c&&(s=!0),i&&(s&&(i.style.opacity=0),t.imageAppended=!0,n.appendChild(i),s&&setTimeout(function(){i.style.opacity=1,a&&setTimeout(function(){t&&t.loaded&&t.placeholder&&(t.placeholder.style.display="none",t.placeholder=null)},500)},50))}},ci=function(e){e.loading=!0,e.loaded=!1;var t=e.img=o.createEl("pswp__img","img"),n=function(){e.loading=!1,e.loaded=!0,e.loadComplete?e.loadComplete(e):e.img=null,t.onload=t.onerror=null,t=null};return t.onload=n,t.onerror=function(){e.loadError=!0,n()},t.src=e.src,t},di=function(e,t){return e.src&&e.loadError&&e.container?(t&&(e.container.innerHTML=""),e.container.innerHTML=l.errorMsg.replace("%url%",e.src),!0):void 0},fi=function(){if(oi.length){for(var e,t=0;t<oi.length;t++)e=oi[t],e.holder.index===e.index&&ui(e.index,e.item,e.baseDiv,e.img);oi=[]}};Ct("Controller",{publicMethods:{lazyLoadItem:function(e){e=St(e);var t=Qn(e);t&&t.src&&!t.loaded&&!t.loading&&(kt("gettingData",e,t),ci(t))},initController:function(){o.extend(l,ri,!0),r.items=Yn=n,Qn=r.getItemAt,ei=l.getNumItemsFn,ti=l.loop,ei()<3&&(l.loop=!1),Dt("beforeChange",function(e){var t,n=l.preload,i=null===e?!0:e>0,o=Math.min(n[0],ei()),a=Math.min(n[1],ei());for(t=1;(i?a:o)>=t;t++)r.lazyLoadItem(f+t);for(t=1;(i?o:a)>=t;t++)r.lazyLoadItem(f-t)}),Dt("initialLayout",function(){r.currItem.initialLayout=l.getThumbBoundsFn&&l.getThumbBoundsFn(f)}),Dt("mainScrollAnimComplete",fi),Dt("initialZoomInEnd",fi),Dt("destroy",function(){for(var e,t=0;t<Yn.length;t++)e=Yn[t],e.container&&(e.container=null),e.placeholder&&(e.placeholder=null),e.img&&(e.img=null),e.preloader&&(e.preloader=null),e.loadError&&(e.loaded=e.loadError=!1);oi=null})},getItemAt:function(e){return e>=0&&void 0!==Yn[e]?Yn[e]:!1},allowProgressiveImg:function(){return l.forceProgressiveLoading||!P||l.mouseUsed||screen.width>1200},setContent:function(e,t){l.loop&&(t=St(t));var n=r.getItemAt(e.index);n&&(n.container=null);var i,a=r.getItemAt(t);if(!a)return void(e.el.innerHTML="");kt("gettingData",t,a),e.index=t,e.item=a;var s=a.container=o.createEl("pswp__zoom-wrap");if(!a.src&&a.html&&(a.html.tagName?s.appendChild(a.html):s.innerHTML=a.html),di(a),!a.src||a.loadError||a.loaded)a.src&&!a.loadError&&(i=o.createEl("pswp__img","img"),i.style.webkitBackfaceVisibility="hidden",i.style.opacity=1,i.src=a.src,ui(t,a,s,i,!0));else{if(a.loadComplete=function(n){if(u){if(n.img.style.webkitBackfaceVisibility="hidden",e&&e.index===t){if(di(n,!0))return n.loadComplete=n.img=null,li(n,gt),At(n),void(e.index===f&&r.updateCurrZoomItem());n.imageAppended?!Jn&&n.placeholder&&(n.placeholder.style.display="none",n.placeholder=null):U.transform&&(at||Jn)?oi.push({item:n,baseDiv:s,img:n.img,index:t,holder:e}):ui(t,n,s,n.img,at||Jn)}n.loadComplete=null,n.img=null,kt("imageLoadComplete",t,n)}},o.features.transform){var c="pswp__img pswp__img--placeholder";c+=a.msrc?"":" pswp__img--placeholder--blank";var d=o.createEl(c,a.msrc?"img":"");a.msrc&&(d.src=a.msrc),d.style.width=a.w+"px",d.style.height=a.h+"px",s.appendChild(d),a.placeholder=d}a.loading||ci(a),r.allowProgressiveImg()&&(!Xn&&U.transform?oi.push({item:a,baseDiv:s,img:a.img,index:t,holder:e}):ui(t,a,s,a.img,!0,!0))}li(a,gt),Xn||t!==f?At(a):(rt=s.style,ni(a,i||a.img)),e.el.innerHTML="",e.el.appendChild(s)},cleanSlide:function(e){e.img&&(e.img.onload=e.img.onerror=null),e.loaded=e.loading=e.img=e.imageAppended=!1}}});var pi,hi={},mi=function(e,t,n){var i=document.createEvent("CustomEvent"),o={origEvent:e,target:e.target,releasePoint:t,pointerType:n||"touch"};
i.initCustomEvent("pswpTap",!0,!0,o),e.target.dispatchEvent(i)};Ct("Tap",{publicMethods:{initTap:function(){Dt("firstTouchStart",r.onTapStart),Dt("touchRelease",r.onTapRelease),Dt("destroy",function(){hi={},pi=null})},onTapStart:function(e){e.length>1&&(clearTimeout(pi),pi=null)},onTapRelease:function(e,t){if(t&&!X&&!V&&!Jt){var n=t;if(pi&&(clearTimeout(pi),pi=null,En(n,hi)))return void kt("doubleTap",n);if("mouse"===t.type)return void mi(e,t,"mouse");var i=e.target.tagName.toUpperCase();if("BUTTON"===i||o.hasClass(e.target,"pswp__single-tap"))return void mi(e,t);Rt(hi,n),pi=setTimeout(function(){mi(e,t),pi=null},300)}}}});var vi;Ct("DesktopZoom",{publicMethods:{initDesktopZoom:function(){z||(P?Dt("mouseUsed",function(){r.setupDesktopZoom()}):r.setupDesktopZoom(!0))},setupDesktopZoom:function(t){vi={};var n="wheel mousewheel DOMMouseScroll";Dt("bindEvents",function(){o.bind(e,n,r.handleMouseWheel)}),Dt("unbindEvents",function(){vi&&o.unbind(e,n,r.handleMouseWheel)}),r.mouseZoomedIn=!1;var i,a=function(){r.mouseZoomedIn&&(o.removeClass(e,"pswp--zoomed-in"),r.mouseZoomedIn=!1),1>y?o.addClass(e,"pswp--zoom-allowed"):o.removeClass(e,"pswp--zoom-allowed"),s()},s=function(){i&&(o.removeClass(e,"pswp--dragging"),i=!1)};Dt("resize",a),Dt("afterChange",a),Dt("pointerDown",function(){r.mouseZoomedIn&&(i=!0,o.addClass(e,"pswp--dragging"))}),Dt("pointerUp",s),t||a()},handleMouseWheel:function(e){if(y<=r.currItem.fitRatio)return l.closeOnScroll||e.preventDefault(),!0;if(e.preventDefault(),e.stopPropagation(),vi.x=0,"deltaX"in e)vi.x=e.deltaX,vi.y=e.deltaY;else if("wheelDelta"in e)e.wheelDeltaX&&(vi.x=-.16*e.wheelDeltaX),vi.y=e.wheelDeltaY?-.16*e.wheelDeltaY:-.16*e.wheelDelta;else{if(!("detail"in e))return;vi.y=e.detail}qt(y,!0),r.panTo(vt.x-vi.x,vt.y-vi.y)},toggleDesktopZoom:function(t){t=t||{x:gt.x/2,y:gt.y/2+Z};var n=l.getDoubleTapZoom(!0,r.currItem),i=y===n;r.mouseZoomedIn=!i,r.zoomTo(i?r.currItem.initialZoomLevel:n,t,333),o[(i?"remove":"add")+"Class"](e,"pswp--zoomed-in")}}});var gi,yi,wi,xi,bi,Ti,Ei,Ci,Si,Ii,Di,ki,Oi={history:!0,galleryUID:1},Mi=function(){return Di.hash.substring(1)},_i=function(){gi&&clearTimeout(gi),wi&&clearTimeout(wi)},Li=function(){var e=Mi(),t={};if(e.length<5)return t;for(var n=e.split("&"),i=0;i<n.length;i++)if(n[i]){var o=n[i].split("=");o.length<2||(t[o[0]]=o[1])}return t.pid=parseInt(t.pid,10)-1,t.pid<0&&(t.pid=0),t},Ai=function(){if(wi&&clearTimeout(wi),Jt||G)return void(wi=setTimeout(Ai,500));xi?clearTimeout(yi):xi=!0;var e=Ei+"&gid="+l.galleryUID+"&pid="+(f+1);Ci||-1===Di.hash.indexOf(e)&&(Ii=!0);var t=Di.href.split("#")[0]+"#"+e;ki?"#"+e!==window.location.hash&&history[Ci?"replaceState":"pushState"]("",document.title,t):Ci?Di.replace(t):Di.hash=e,Ci=!0,yi=setTimeout(function(){xi=!1},60)};Ct("History",{publicMethods:{initHistory:function(){if(o.extend(l,Oi,!0),l.history){Di=window.location,Ii=!1,Si=!1,Ci=!1,Ei=Mi(),ki="pushState"in history,Ei.indexOf("gid=")>-1&&(Ei=Ei.split("&gid=")[0],Ei=Ei.split("?gid=")[0]),Dt("afterChange",r.updateURL),Dt("unbindEvents",function(){o.unbind(window,"hashchange",r.onHashChange)});var e=function(){Ti=!0,Si||(Ii?history.back():Ei?Di.hash=Ei:ki?history.pushState("",document.title,Di.pathname+Di.search):Di.hash=""),_i()};Dt("unbindEvents",function(){d&&e()}),Dt("destroy",function(){Ti||e()}),Dt("firstUpdate",function(){f=Li().pid});var t=Ei.indexOf("pid=");t>-1&&(Ei=Ei.substring(0,t),"&"===Ei.slice(-1)&&(Ei=Ei.slice(0,-1))),setTimeout(function(){u&&o.bind(window,"hashchange",r.onHashChange)},40)}},onHashChange:function(){return Mi()===Ei?(Si=!0,void r.close()):void(xi||(bi=!0,r.goTo(Li().pid),bi=!1))},updateURL:function(){_i(),bi||(Ci?gi=setTimeout(Ai,800):Ai())}}}),o.extend(r,on)};return e}),function(e,t){"function"==typeof define&&define.amd?define(t):"object"==typeof exports?module.exports=t():e.PhotoSwipeUI_Default=t()}(this,function(){"use strict";var e=function(e,t){var n,i,o,r,a,s,l,u,c,d,f,p,h,m,v,g,y,w,x,b=this,T=!1,E=!0,C=!0,S={barsSize:{top:44,bottom:"auto"},closeElClasses:["item","caption","zoom-wrap","ui","top-bar"],timeToIdle:4e3,timeToIdleOutside:1e3,loadingIndicatorDelay:1e3,addCaptionHTMLFn:function(e,t){return e.title?(t.children[0].innerHTML=e.title,!0):(t.children[0].innerHTML="",!1)},closeEl:!0,captionEl:!0,fullscreenEl:!0,zoomEl:!0,shareEl:!0,counterEl:!0,arrowEl:!0,preloaderEl:!0,tapToClose:!1,tapToToggleControls:!0,clickToCloseNonZoomable:!0,shareButtons:[{id:"facebook",label:"Share on Facebook",url:"https://www.facebook.com/sharer/sharer.php?u={{url}}"},{id:"twitter",label:"Tweet",url:"https://twitter.com/intent/tweet?text={{text}}&url={{url}}"},{id:"pinterest",label:"Pin it",url:"http://www.pinterest.com/pin/create/button/?url={{url}}&media={{image_url}}&description={{text}}"},{id:"download",label:"Download image",url:"{{raw_image_url}}",download:!0}],getImageURLForShare:function(){return e.currItem.src||""},getPageURLForShare:function(){return window.location.href},getTextForShare:function(){return e.currItem.title||""},indexIndicatorSep:" / "},I=function(e){if(g)return!0;e=e||window.event,v.timeToIdle&&v.mouseUsed&&!c&&F();for(var n,i,o=e.target||e.srcElement,r=o.className,a=0;a<B.length;a++)n=B[a],n.onTap&&r.indexOf("pswp__"+n.name)>-1&&(n.onTap(),i=!0);if(i){e.stopPropagation&&e.stopPropagation(),g=!0;var s=t.features.isOldAndroid?600:30;y=setTimeout(function(){g=!1},s)}},D=function(){return!e.likelyTouchDevice||v.mouseUsed||screen.width>1200},k=function(e,n,i){t[(i?"add":"remove")+"Class"](e,"pswp__"+n)},O=function(){var e=1===v.getNumItemsFn();e!==m&&(k(i,"ui--one-slide",e),m=e)},M=function(){k(l,"share-modal--hidden",C)},_=function(){return C=!C,C?(t.removeClass(l,"pswp__share-modal--fade-in"),setTimeout(function(){C&&M()},300)):(M(),setTimeout(function(){C||t.addClass(l,"pswp__share-modal--fade-in")},30)),C||A(),!1},L=function(t){t=t||window.event;var n=t.target||t.srcElement;return e.shout("shareLinkClick",t,n),n.href?n.hasAttribute("download")?!0:(window.open(n.href,"pswp_share","scrollbars=yes,resizable=yes,toolbar=no,location=yes,width=550,height=420,top=100,left="+(window.screen?Math.round(screen.width/2-275):100)),C||_(),!1):!1},A=function(){for(var e,t,n,i,o,r="",a=0;a<v.shareButtons.length;a++)e=v.shareButtons[a],n=v.getImageURLForShare(e),i=v.getPageURLForShare(e),o=v.getTextForShare(e),t=e.url.replace("{{url}}",encodeURIComponent(i)).replace("{{image_url}}",encodeURIComponent(n)).replace("{{raw_image_url}}",n).replace("{{text}}",encodeURIComponent(o)),r+='<a href="'+t+'" target="_blank" class="pswp__share--'+e.id+'"'+(e.download?"download":"")+">"+e.label+"</a>",v.parseShareButtonOut&&(r=v.parseShareButtonOut(e,r));l.children[0].innerHTML=r,l.children[0].onclick=L},P=function(e){for(var n=0;n<v.closeElClasses.length;n++)if(t.hasClass(e,"pswp__"+v.closeElClasses[n]))return!0},N=0,F=function(){clearTimeout(x),N=0,c&&b.setIdle(!1)},R=function(e){e=e?e:window.event;var t=e.relatedTarget||e.toElement;t&&"HTML"!==t.nodeName||(clearTimeout(x),x=setTimeout(function(){b.setIdle(!0)},v.timeToIdleOutside))},Z=function(){v.fullscreenEl&&(n||(n=b.getFullscreenAPI()),n?(t.bind(document,n.eventK,b.updateFullscreen),b.updateFullscreen(),t.addClass(e.template,"pswp--supports-fs")):t.removeClass(e.template,"pswp--supports-fs"))},z=function(){v.preloaderEl&&(j(!0),d("beforeChange",function(){clearTimeout(h),h=setTimeout(function(){e.currItem&&e.currItem.loading?(!e.allowProgressiveImg()||e.currItem.img&&!e.currItem.img.naturalWidth)&&j(!1):j(!0)},v.loadingIndicatorDelay)}),d("imageLoadComplete",function(t,n){e.currItem===n&&j(!0)}))},j=function(e){p!==e&&(k(f,"preloader--active",!e),p=e)},U=function(e){var n=e.vGap;if(D()){var a=v.barsSize;if(v.captionEl&&"auto"===a.bottom)if(r||(r=t.createEl("pswp__caption pswp__caption--fake"),r.appendChild(t.createEl("pswp__caption__center")),i.insertBefore(r,o),t.addClass(i,"pswp__ui--fit")),v.addCaptionHTMLFn(e,r,!0)){var s=r.clientHeight;n.bottom=parseInt(s,10)||44}else n.bottom=a.top;else n.bottom=a.bottom;n.top=a.top}else n.top=n.bottom=0},H=function(){v.timeToIdle&&d("mouseUsed",function(){t.bind(document,"mousemove",F),t.bind(document,"mouseout",R),w=setInterval(function(){N++,2===N&&b.setIdle(!0)},v.timeToIdle/2)})},q=function(){d("onVerticalDrag",function(e){E&&.95>e?b.hideControls():!E&&e>=.95&&b.showControls()});var e;d("onPinchClose",function(t){E&&.9>t?(b.hideControls(),e=!0):e&&!E&&t>.9&&b.showControls()}),d("zoomGestureEnded",function(){e=!1,e&&!E&&b.showControls()})},B=[{name:"caption",option:"captionEl",onInit:function(e){o=e}},{name:"share-modal",option:"shareEl",onInit:function(e){l=e},onTap:function(){_()}},{name:"button--share",option:"shareEl",onInit:function(e){s=e},onTap:function(){_()}},{name:"button--zoom",option:"zoomEl",onTap:e.toggleDesktopZoom},{name:"counter",option:"counterEl",onInit:function(e){a=e}},{name:"button--close",option:"closeEl",onTap:e.close},{name:"button--arrow--left",option:"arrowEl",onTap:e.prev},{name:"button--arrow--right",option:"arrowEl",onTap:e.next},{name:"button--fs",option:"fullscreenEl",onTap:function(){n.isFullscreen()?n.exit():n.enter()}},{name:"preloader",option:"preloaderEl",onInit:function(e){f=e}}],$=function(){var e,n,o,r=function(i){if(i)for(var r=i.length,a=0;r>a;a++){e=i[a],n=e.className;for(var s=0;s<B.length;s++)o=B[s],n.indexOf("pswp__"+o.name)>-1&&(v[o.option]?(t.removeClass(e,"pswp__element--disabled"),o.onInit&&o.onInit(e)):t.addClass(e,"pswp__element--disabled"))}};r(i.children);var a=t.getChildByClass(i,"pswp__top-bar");a&&r(a.children)};b.init=function(){t.extend(e.options,S,!0),v=e.options,i=t.getChildByClass(e.scrollWrap,"pswp__ui"),d=e.listen,q(),d("beforeChange",b.update),d("doubleTap",function(t){var n=e.currItem.initialZoomLevel;e.getZoomLevel()!==n?e.zoomTo(n,t,333):e.zoomTo(v.getDoubleTapZoom(!1,e.currItem),t,333)}),d("preventDragEvent",function(e,t,n){var i=e.target||e.srcElement;i&&i.className&&e.type.indexOf("mouse")>-1&&(i.className.indexOf("__caption")>0||/(SMALL|STRONG|EM)/i.test(i.tagName))&&(n.prevent=!1)}),d("bindEvents",function(){t.bind(i,"pswpTap click",I),t.bind(e.scrollWrap,"pswpTap",b.onGlobalTap),e.likelyTouchDevice||t.bind(e.scrollWrap,"mouseover",b.onMouseOver)}),d("unbindEvents",function(){C||_(),w&&clearInterval(w),t.unbind(document,"mouseout",R),t.unbind(document,"mousemove",F),t.unbind(i,"pswpTap click",I),t.unbind(e.scrollWrap,"pswpTap",b.onGlobalTap),t.unbind(e.scrollWrap,"mouseover",b.onMouseOver),n&&(t.unbind(document,n.eventK,b.updateFullscreen),n.isFullscreen()&&(v.hideAnimationDuration=0,n.exit()),n=null)}),d("destroy",function(){v.captionEl&&(r&&i.removeChild(r),t.removeClass(o,"pswp__caption--empty")),l&&(l.children[0].onclick=null),t.removeClass(i,"pswp__ui--over-close"),t.addClass(i,"pswp__ui--hidden"),b.setIdle(!1)}),v.showAnimationDuration||t.removeClass(i,"pswp__ui--hidden"),d("initialZoomIn",function(){v.showAnimationDuration&&t.removeClass(i,"pswp__ui--hidden")}),d("initialZoomOut",function(){t.addClass(i,"pswp__ui--hidden")}),d("parseVerticalMargin",U),$(),v.shareEl&&s&&l&&(C=!0),O(),H(),Z(),z()},b.setIdle=function(e){c=e,k(i,"ui--idle",e)},b.update=function(){E&&e.currItem?(b.updateIndexIndicator(),v.captionEl&&(v.addCaptionHTMLFn(e.currItem,o),k(o,"caption--empty",!e.currItem.title)),T=!0):T=!1,C||_(),O()},b.updateFullscreen=function(){k(e.template,"fs",n.isFullscreen())},b.updateIndexIndicator=function(){v.counterEl&&(a.innerHTML=e.getCurrentIndex()+1+v.indexIndicatorSep+v.getNumItemsFn())},b.onGlobalTap=function(n){n=n||window.event;var i=n.target||n.srcElement;if(!g)if(n.detail&&"mouse"===n.detail.pointerType){if(P(i))return void e.close();t.hasClass(i,"pswp__img")&&(1===e.getZoomLevel()&&e.getZoomLevel()<=e.currItem.fitRatio?v.clickToCloseNonZoomable&&e.close():e.toggleDesktopZoom(n.detail.releasePoint))}else if(v.tapToToggleControls&&(E?b.hideControls():b.showControls()),v.tapToClose&&(t.hasClass(i,"pswp__img")||P(i)))return void e.close()},b.onMouseOver=function(e){e=e||window.event;var t=e.target||e.srcElement;k(i,"ui--over-close",P(t))},b.hideControls=function(){t.addClass(i,"pswp__ui--hidden"),E=!1},b.showControls=function(){E=!0,T||b.update(),t.removeClass(i,"pswp__ui--hidden")},b.supportsFullscreen=function(){var e=document;return!!(e.exitFullscreen||e.mozCancelFullScreen||e.webkitExitFullscreen||e.msExitFullscreen)},b.getFullscreenAPI=function(){var t,n=document.documentElement,i="fullscreenchange";return n.requestFullscreen?t={enterK:"requestFullscreen",exitK:"exitFullscreen",elementK:"fullscreenElement",eventK:i}:n.mozRequestFullScreen?t={enterK:"mozRequestFullScreen",exitK:"mozCancelFullScreen",elementK:"mozFullScreenElement",eventK:"moz"+i}:n.webkitRequestFullscreen?t={enterK:"webkitRequestFullscreen",exitK:"webkitExitFullscreen",elementK:"webkitFullscreenElement",eventK:"webkit"+i}:n.msRequestFullscreen&&(t={enterK:"msRequestFullscreen",exitK:"msExitFullscreen",elementK:"msFullscreenElement",eventK:"MSFullscreenChange"}),t&&(t.enter=function(){return u=v.closeOnScroll,v.closeOnScroll=!1,"webkitRequestFullscreen"!==this.enterK?e.template[this.enterK]():void e.template[this.enterK](Element.ALLOW_KEYBOARD_INPUT)},t.exit=function(){return v.closeOnScroll=u,document[this.exitK]()},t.isFullscreen=function(){return document[this.elementK]}),t}};return e}),window.touchdevice="ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch,window.touchdevice&&"undefined"!=typeof CustomEvent&&window.PUSH(),window.gallery=null,$(window).on("load",loadedPage),window.addEventListener("push",loadedPage);